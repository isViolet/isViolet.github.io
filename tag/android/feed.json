{
    "version": "https://jsonfeed.org/version/1",
    "title": "å‹äººå¸ğŸ´ â€¢ All posts by \"android\" tag",
    "description": "",
    "home_page_url": "https://isviolet.github.io",
    "items": [
        {
            "id": "https://isviolet.github.io/p/566cdd19.html",
            "url": "https://isviolet.github.io/p/566cdd19.html",
            "title": "OKHttp3.10.0æœ€æ–°ç‰ˆçš„æè‡´å°è£…",
            "date_published": "2021-05-18T13:12:12.353Z",
            "content_html": "<h1 id=\"å‰è¨€\"><a class=\"anchor\" href=\"#å‰è¨€\">#</a> å‰è¨€</h1>\n<blockquote>\n<p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒRetrofit ç›®å‰æ˜¯æ¯”è¾ƒç«çš„ç½‘ç»œè¯·æ±‚æ¡†æ¶ï¼Œæœ¬èº«å°±æ˜¯æ˜¯ OKHttp è¿›è¡Œäº†å°è£…ï¼Œå®é™…å¹²æ´»çš„è¿˜æ˜¯ OKhttpï¼Œæ‰€ä»¥ä¸ºäº†æ›´å¥½çš„ç”¨å¥½ Retrofitï¼Œå¾ˆæœ‰å¿…è¦å¤ä¹ ä¸€ä¸‹ OKHTTPï¼Œå¹¶ä¸” OKhttp çš„æœ€æ–°ç‰ˆæœ¬ 3.10.0 å’Œä¹‹å‰ç‰ˆæœ¬çš„æ“ä½œä¹Ÿæ˜¯ä¸å°½ç›¸åŒï¼Œæ‰€ä»¥ä»Šå¤©é‡æ–°å¯¹ä»–æ“ä½œä¸€æ³¢ï¼Œä»ç®€å•å®ç”¨åˆ°å¸¸ç”¨ä½¿ç”¨æ–¹å¼çš„å°è£…å‡æœ‰æ¶‰çŒï¼Œäº²æµ‹å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œæœ¬æ–‡ä»¥è±†ç“£çš„ç”µå½± api åšæµ‹è¯•æ•°æ®ï¼Œè¯¦ç»†æºç ä¸‹æ–¹ä¼šæœ‰ä¸‹è½½åœ°å€ï¼Œæ—¶é—´ç´§è¿«ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œä»£ç å°±æ˜¯æœ€å¥½çš„æ³¨é‡Šï¼Œæ¬¢è¿ forkï¼ PS: æœ¬æ–‡ä¸»è¦å›´ç»•ä»¥ä¸‹å››ä¸ªæ–‡ä»¶åšæ“ä½œï¼š ![file](<span class=\"exturl\" data-url=\"aHR0cDovL25hdmllbHVjay53YW5nL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDIwLzA5L2ltYWdlLTE1OTkwMzY2MjM1NDEucG5n\">http://navieluck.wang/wp-content/uploads/2020/09/image-1599036623541.png</span></p>\n</blockquote>\n<h1 id=\"okhttp310çš„getè¯·æ±‚\"><a class=\"anchor\" href=\"#okhttp310çš„getè¯·æ±‚\">#</a> OKHTTP3.10 çš„ GET è¯·æ±‚</h1>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getDouBan1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token comment\">//1, åˆ›å»º OKHttpClient å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token class-name\">OkHttpClient</span> okHttpClient <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OkHttpClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token comment\">//2, åˆ›å»ºä¸€ä¸ª Request</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token class-name\">Request</span> request <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Request<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">url</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Constant</span><span class=\"token punctuation\">.</span>URL<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token comment\">//3, åˆ›å»ºä¸€ä¸ª call å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token class-name\">Call</span> call <span class=\"token operator\">=</span> okHttpClient<span class=\"token punctuation\">.</span><span class=\"token function\">newCall</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token comment\">//4, å°†è¯·æ±‚æ·»åŠ åˆ°è°ƒåº¦ä¸­</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        call<span class=\"token punctuation\">.</span><span class=\"token function\">enqueue</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Callback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onFailure</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Call</span> call<span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onResponse</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Call</span> call<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Response</span> response<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span><span class=\"token function\">isSuccessful</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                    res <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                    <span class=\"token class-name\">ThreadPoolUtil</span><span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Runnable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                        <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>                            <span class=\"token class-name\">Log</span><span class=\"token punctuation\">.</span><span class=\"token function\">d</span><span class=\"token punctuation\">(</span>TAG<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>                        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>                    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>                    e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h1 id=\"okhttp310çš„postè¯·æ±‚\"><a class=\"anchor\" href=\"#okhttp310çš„postè¯·æ±‚\">#</a> OKHTTP3.10 çš„ POST è¯·æ±‚</h1>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">postDouBan</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token comment\">//1, åˆ›å»º OKHttpClient å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token class-name\">OkHttpClient</span> okHttpClient <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OkHttpClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token comment\">//2, åˆ›å»ºä¸€ä¸ª Request</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token class-name\">RequestBody</span> requestBody <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormBody<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"username\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ytf\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"password\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"123\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">Request</span> request <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Request<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">url</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Constant</span><span class=\"token punctuation\">.</span>URL<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>requestBody<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token comment\">//4, å°†è¯·æ±‚æ·»åŠ åˆ°è°ƒåº¦ä¸­</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        okHttpClient<span class=\"token punctuation\">.</span><span class=\"token function\">newCall</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">enqueue</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Callback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onFailure</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Call</span> call<span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onResponse</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Call</span> call<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Response</span> response<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span><span class=\"token function\">isSuccessful</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                    res <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                    <span class=\"token class-name\">ThreadPoolUtil</span><span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Runnable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>                        <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>                        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token comment\">// Looper.prepare();// Toast.makeText(MainActivity.this, res, Toast.LENGTH_SHORT).show(); Log.d(TAG, res); EventBus.getDefault().post(res); &#125; &#125;); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125;); &#125;</span></pre></td></tr></table></figure><h1 id=\"okhttp310çš„getå°è£…è¯·æ±‚\"><a class=\"anchor\" href=\"#okhttp310çš„getå°è£…è¯·æ±‚\">#</a> OKHTTP3.10 çš„ GET å°è£…è¯·æ±‚</h1>\n<h2 id=\"å·¥å…·ç±»çš„å•ä¾‹\"><a class=\"anchor\" href=\"#å·¥å…·ç±»çš„å•ä¾‹\">#</a> å·¥å…·ç±»çš„å•ä¾‹ï¼š</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>     * æ‡’æ±‰å¼åŠ é”å•ä¾‹æ¨¡å¼</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>     * @return</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">OkHTTPManger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        okHttpClient <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OkHttpClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">OkHTTPManger</span> <span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>instance  <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">synchronized</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">OkHTTPManger</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>instance  <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                instance <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OkHTTPManger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">return</span> instance<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"getåŒæ­¥è¯·æ±‚\"><a class=\"anchor\" href=\"#getåŒæ­¥è¯·æ±‚\">#</a> get åŒæ­¥è¯·æ±‚</h2>\n<h3 id=\"é€šè¿‡responsebodystringè·å–è¿”å›çš„å­—ç¬¦ä¸²\"><a class=\"anchor\" href=\"#é€šè¿‡responsebodystringè·å–è¿”å›çš„å­—ç¬¦ä¸²\">#</a> é€šè¿‡ response.body ().string () è·å–è¿”å›çš„å­—ç¬¦ä¸²</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>     * get åŒæ­¥è¯·æ±‚ä¸éœ€è¦ä¼ å‚æ•°</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>     * é€šè¿‡ response.body ().string () è·å–è¿”å›çš„å­—ç¬¦ä¸²</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     *</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>     * @param url</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     * @return</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getSyncBackString</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> url<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">Request</span> request <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Request<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">Call</span> call <span class=\"token operator\">=</span> okHttpClient<span class=\"token punctuation\">.</span><span class=\"token function\">newCall</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token class-name\">Response</span> response <span class=\"token operator\">=</span> call<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token comment\">// å°† response è½¬åŒ–æˆ String</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token class-name\">String</span> responseStr <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token keyword\">return</span> responseStr<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">.</span><span class=\"token function\">e</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GETåŒæ­¥è¯·æ±‚è§£æä¸ºStringå¼‚å¸¸\"</span> <span class=\"token operator\">+</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"é€šè¿‡responsebodybytesè·å–è¿”å›çš„äºŒè¿›åˆ¶å­—èŠ‚æ•°ç»„\"><a class=\"anchor\" href=\"#é€šè¿‡responsebodybytesè·å–è¿”å›çš„äºŒè¿›åˆ¶å­—èŠ‚æ•°ç»„\">#</a> é€šè¿‡ response.body ().bytes () è·å–è¿”å›çš„äºŒè¿›åˆ¶å­—èŠ‚æ•°ç»„</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>     * get åŒæ­¥è¯·æ±‚</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>     * é€šè¿‡ response.body ().bytes () è·å–è¿”å›çš„äºŒè¿›åˆ¶å­—èŠ‚æ•°ç»„</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     *</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>     * @param url</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     * @return</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">byte</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token function\">getSyncBackByteArray</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> url<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">Request</span> request <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Request<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">Call</span> call <span class=\"token operator\">=</span> okHttpClient<span class=\"token punctuation\">.</span><span class=\"token function\">newCall</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token class-name\">Response</span> response <span class=\"token operator\">=</span> call<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token comment\">// å°† response è½¬åŒ–æˆ String</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token keyword\">byte</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> responseStr <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">bytes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token keyword\">return</span> responseStr<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">.</span><span class=\"token function\">e</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GETåŒæ­¥è¯·æ±‚è§£æä¸ºbyteæ•°ç»„å¼‚å¸¸\"</span> <span class=\"token operator\">+</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"é€šè¿‡responsebodybytestreamè·å–è¿”å›çš„äºŒè¿›åˆ¶å­—èŠ‚æµ\"><a class=\"anchor\" href=\"#é€šè¿‡responsebodybytestreamè·å–è¿”å›çš„äºŒè¿›åˆ¶å­—èŠ‚æµ\">#</a> é€šè¿‡ response.body ().byteStream () è·å–è¿”å›çš„äºŒè¿›åˆ¶å­—èŠ‚æµ</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>     * get åŒæ­¥è¯·æ±‚</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>     * é€šè¿‡ response.body ().byteStream () è·å–è¿”å›çš„äºŒè¿›åˆ¶å­—èŠ‚æµ</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     *</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>     * @param url</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     * @return</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">InputStream</span> <span class=\"token function\">getSyncBackByteStream</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> url<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">Request</span> request <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Request<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">Call</span> call <span class=\"token operator\">=</span> okHttpClient<span class=\"token punctuation\">.</span><span class=\"token function\">newCall</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token class-name\">Response</span> response <span class=\"token operator\">=</span> call<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token comment\">// å°† response è½¬åŒ–æˆ String</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token class-name\">InputStream</span> responseStr <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">byteStream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token keyword\">return</span> responseStr<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">.</span><span class=\"token function\">e</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GETåŒæ­¥è¯·æ±‚è§£æä¸ºStringå¼‚å¸¸\"</span> <span class=\"token operator\">+</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"é€šè¿‡responsebodybytestreamè·å–è¿”å›çš„äºŒè¿›åˆ¶å­—èŠ‚æµ-2\"><a class=\"anchor\" href=\"#é€šè¿‡responsebodybytestreamè·å–è¿”å›çš„äºŒè¿›åˆ¶å­—èŠ‚æµ-2\">#</a> é€šè¿‡ response.body ().byteStream () è·å–è¿”å›çš„äºŒè¿›åˆ¶å­—èŠ‚æµ</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>     * get åŒæ­¥è¯·æ±‚</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>     * é€šè¿‡ response.body ().byteStream () è·å–è¿”å›çš„äºŒè¿›åˆ¶å­—èŠ‚æµ</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     *</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>     * @param url</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     * @return</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Reader</span> <span class=\"token function\">getSyncBackCharReader</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> url<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">Request</span> request <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Request<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">Call</span> call <span class=\"token operator\">=</span> okHttpClient<span class=\"token punctuation\">.</span><span class=\"token function\">newCall</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token class-name\">Response</span> response <span class=\"token operator\">=</span> call<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token comment\">// å°† response è½¬åŒ–æˆ String</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token class-name\">Reader</span> responseStr <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">charStream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token keyword\">return</span> responseStr<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">.</span><span class=\"token function\">e</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GETåŒæ­¥è¯·æ±‚è§£æä¸ºReaderå¼‚å¸¸\"</span> <span class=\"token operator\">+</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"getå¼‚æ­¥è¯·æ±‚\"><a class=\"anchor\" href=\"#getå¼‚æ­¥è¯·æ±‚\">#</a> get å¼‚æ­¥è¯·æ±‚</h2>\n<h3 id=\"getå¼‚æ­¥è¯·æ±‚ä¸ä¼ å‚æ•°\"><a class=\"anchor\" href=\"#getå¼‚æ­¥è¯·æ±‚ä¸ä¼ å‚æ•°\">#</a> get å¼‚æ­¥è¯·æ±‚ä¸ä¼ å‚æ•°</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>     * get å¼‚æ­¥è¯·æ±‚ä¸ä¼ å‚æ•°</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>     * é€šè¿‡ response.body ().string () è·å–è¿”å›çš„å­—ç¬¦ä¸²</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     * å¼‚æ­¥è¿”å›å€¼ä¸èƒ½æ›´æ–° UIï¼Œè¦å¼€å¯æ–°çº¿ç¨‹</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>     *</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     * @param url</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>     * @return</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getAsynBackStringWithoutParms</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> url<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MyDataCallBack</span> myDataCallBack<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">final</span> <span class=\"token class-name\">Request</span> request <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Request<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token punctuation\">.</span><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token class-name\">Call</span> call <span class=\"token operator\">=</span> okHttpClient<span class=\"token punctuation\">.</span><span class=\"token function\">newCall</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        myDataCallBack<span class=\"token punctuation\">.</span><span class=\"token function\">onBefore</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token comment\">// è¯·æ±‚åŠ å…¥è°ƒåº¦</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        call<span class=\"token punctuation\">.</span><span class=\"token function\">enqueue</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Callback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onFailure</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Call</span> call<span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\">//                 Logger.e (\"GET å¼‚æ­¥è¯·æ±‚ä¸º String å¤±è´¥\"+e.toString ());                    myDataCallBack.requestFailure (request, e);                &#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onResponse</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Call</span> call<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Response</span> response<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>                responseStrGETAsyn <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>                <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>                    myDataCallBack<span class=\"token punctuation\">.</span><span class=\"token function\">requestSuccess</span><span class=\"token punctuation\">(</span>responseStrGETAsyn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>                    e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>                    <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">.</span><span class=\"token function\">e</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span>GETå¼‚æ­¥è¯·æ±‚ä¸º<span class=\"token class-name\">String</span>è§£æå¼‚å¸¸å¤±è´¥<span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span> <span class=\"token operator\">+</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        myDataCallBack<span class=\"token punctuation\">.</span><span class=\"token function\">onAfter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">.</span><span class=\"token function\">e</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span>GETå¼‚æ­¥è¯·æ±‚è§£æä¸º<span class=\"token class-name\">String</span>å¼‚å¸¸<span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span> <span class=\"token operator\">+</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token keyword\">return</span> responseStrGETAsyn<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"getå¼‚æ­¥è¯·æ±‚ä¼ å‚æ•°å¯ä»¥ä¼ null\"><a class=\"anchor\" href=\"#getå¼‚æ­¥è¯·æ±‚ä¼ å‚æ•°å¯ä»¥ä¼ null\">#</a> get å¼‚æ­¥è¯·æ±‚ä¼ å‚æ•° (å¯ä»¥ä¼  null)</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>     * get å¼‚æ­¥è¯·æ±‚ä¼ å‚æ•° (å¯ä»¥ä¼  null)</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>     * é€šè¿‡ response.body ().string () è·å–è¿”å›çš„å­—ç¬¦ä¸²</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     * å¼‚æ­¥è¿”å›å€¼ä¸èƒ½æ›´æ–° UIï¼Œè¦å¼€å¯æ–°çº¿ç¨‹</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>     *</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     * @param url</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>     * @return</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getAsynBackStringWithParms</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> url<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> params<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MyDataCallBack</span> myDataCallBack<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>params  <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            params <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token comment\">// è¯·æ±‚ urlï¼ˆbaseUrl + å‚æ•°ï¼‰</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token class-name\">String</span> doUrl <span class=\"token operator\">=</span> <span class=\"token function\">urlJoint</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> params<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">final</span> <span class=\"token class-name\">Request</span> request <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Request<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>doUrl<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">//                .header (\"Cookie\", \"è‡ªåŠ¨ç®¡ç†æ›´æ–°éœ€è¦æºå¸¦çš„ Cookie\")</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token class-name\">Call</span> call <span class=\"token operator\">=</span> okHttpClient<span class=\"token punctuation\">.</span><span class=\"token function\">newCall</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            myDataCallBack<span class=\"token punctuation\">.</span><span class=\"token function\">onBefore</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token comment\">// è¯·æ±‚åŠ å…¥è°ƒåº¦</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            call<span class=\"token punctuation\">.</span><span class=\"token function\">enqueue</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Callback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onFailure</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Call</span> call<span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\">//                 Logger.e (\"GET å¼‚æ­¥è¯·æ±‚ä¸º String å¤±è´¥\"+e.toString ());                    myDataCallBack.requestFailure (request, e);                &#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onResponse</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Call</span> call<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Response</span> response<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>                responseStrGETAsyn <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>                <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>                    myDataCallBack<span class=\"token punctuation\">.</span><span class=\"token function\">requestSuccess</span><span class=\"token punctuation\">(</span>responseStrGETAsyn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>                    e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>                    <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">.</span><span class=\"token function\">e</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span>GETå¼‚æ­¥è¯·æ±‚ä¸º<span class=\"token class-name\">String</span>è§£æå¼‚å¸¸å¤±è´¥<span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span> <span class=\"token operator\">+</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        myDataCallBack<span class=\"token punctuation\">.</span><span class=\"token function\">onAfter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">.</span><span class=\"token function\">e</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span>GETå¼‚æ­¥è¯·æ±‚è§£æä¸º<span class=\"token class-name\">String</span>å¼‚å¸¸<span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span> <span class=\"token operator\">+</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>        e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token keyword\">return</span> responseStrGETAsyn<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"æ˜æ–‡ä¼ å‚æ‹¼æ¥url\"><a class=\"anchor\" href=\"#æ˜æ–‡ä¼ å‚æ‹¼æ¥url\">#</a> æ˜æ–‡ä¼ å‚æ‹¼æ¥ URL</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>     * @param url    å®é™… URL çš„ path</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>     * @param params</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     * @return</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">String</span> <span class=\"token function\">urlJoint</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> url<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> params<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token class-name\">StringBuilder</span> realURL <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">StringBuilder</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Constant</span><span class=\"token punctuation\">.</span>URL<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        realURL <span class=\"token operator\">=</span> realURL<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">boolean</span> isFirst <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>params  <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            params <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token class-name\">Set</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Map<span class=\"token punctuation\">.</span>Entry</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> entrySet <span class=\"token operator\">=</span> params<span class=\"token punctuation\">.</span><span class=\"token function\">entrySet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Map<span class=\"token punctuation\">.</span>Entry</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> entry <span class=\"token operator\">:</span> entrySet<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isFirst <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>url<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"?\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                    isFirst <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                    realURL<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"?\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                    realURL<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&amp;\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                realURL<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>entry<span class=\"token punctuation\">.</span><span class=\"token function\">getKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                realURL<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"=\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>entry<span class=\"token punctuation\">.</span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>                    realURL<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>                    realURL<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>entry<span class=\"token punctuation\">.</span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token keyword\">return</span> realURL<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h1 id=\"okhttp310çš„postå°è£…è¯·æ±‚\"><a class=\"anchor\" href=\"#okhttp310çš„postå°è£…è¯·æ±‚\">#</a> OKHTTP3.10 çš„ POST å°è£…è¯·æ±‚</h1>\n<h2 id=\"postå¼‚æ­¥è¯·æ±‚mapä¼ å‚\"><a class=\"anchor\" href=\"#postå¼‚æ­¥è¯·æ±‚mapä¼ å‚\">#</a> post å¼‚æ­¥è¯·æ±‚ map ä¼ å‚</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>     * post å¼‚æ­¥è¯·æ±‚ map ä¼ å‚</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>     * é€šè¿‡ response.body ().string () è·å–è¿”å›çš„å­—ç¬¦ä¸²</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     * å¼‚æ­¥è¿”å›å€¼ä¸èƒ½æ›´æ–° UIï¼Œè¦å¼€å¯æ–°çº¿ç¨‹</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>     *</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     * @param url</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>     * @return</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">postAsynBackString</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> url<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> params<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MyDataCallBack</span> myDataCallBack<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token class-name\">RequestBody</span> requestBody<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>params  <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            params <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token class-name\">FormBody<span class=\"token punctuation\">.</span>Builder</span> builder <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormBody<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>     * åœ¨è¿™å¯¹æ·»åŠ çš„å‚æ•°è¿›è¡Œéå†</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token function\">addMapParmsToFromBody</span><span class=\"token punctuation\">(</span>params<span class=\"token punctuation\">,</span> builder<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    requestBody <span class=\"token operator\">=</span> builder<span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token class-name\">String</span> realURL <span class=\"token operator\">=</span> <span class=\"token function\">urlJoint</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token comment\">// ç»“æœè¿”å›</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token keyword\">final</span> <span class=\"token class-name\">Request</span> request <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Request<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token punctuation\">.</span><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>realURL<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            <span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>requestBody<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token class-name\">Call</span> call <span class=\"token operator\">=</span> okHttpClient<span class=\"token punctuation\">.</span><span class=\"token function\">newCall</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        myDataCallBack<span class=\"token punctuation\">.</span><span class=\"token function\">onBefore</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token comment\">// è¯·æ±‚åŠ å…¥è°ƒåº¦</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        call<span class=\"token punctuation\">.</span><span class=\"token function\">enqueue</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Callback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>            <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>            <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onFailure</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Call</span> call<span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>                myDataCallBack<span class=\"token punctuation\">.</span><span class=\"token function\">requestFailure</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>            <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>            <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onResponse</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Call</span> call<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Response</span> response<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>                responseStrGETAsyn <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// æ­¤å¤„ä¹Ÿå¯ä»¥è§£æä¸º byte [],Reader,InputStream</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>                <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>                    myDataCallBack<span class=\"token punctuation\">.</span><span class=\"token function\">requestSuccess</span><span class=\"token punctuation\">(</span>responseStrGETAsyn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>                    e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>                    <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">.</span><span class=\"token function\">e</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span>POSTå¼‚æ­¥è¯·æ±‚ä¸º<span class=\"token class-name\">String</span>è§£æå¼‚å¸¸å¤±è´¥<span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span> <span class=\"token operator\">+</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>        myDataCallBack<span class=\"token punctuation\">.</span><span class=\"token function\">onAfter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>        <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">.</span><span class=\"token function\">e</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span>POSTå¼‚æ­¥è¯·æ±‚è§£æä¸º<span class=\"token class-name\">String</span>å¼‚å¸¸<span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span> <span class=\"token operator\">+</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>        e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>    <span class=\"token keyword\">return</span> responseStrGETAsyn<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"å°†å‚æ•°æ·»åŠ åˆ°è¯·æ±‚ä½“\"><a class=\"anchor\" href=\"#å°†å‚æ•°æ·»åŠ åˆ°è¯·æ±‚ä½“\">#</a> å°†å‚æ•°æ·»åŠ åˆ°è¯·æ±‚ä½“</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">addMapParmsToFromBody</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> params<span class=\"token punctuation\">,</span> <span class=\"token class-name\">FormBody<span class=\"token punctuation\">.</span>Builder</span> builder<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Map<span class=\"token punctuation\">.</span>Entry</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> map <span class=\"token operator\">:</span> params<span class=\"token punctuation\">.</span><span class=\"token function\">entrySet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>            <span class=\"token class-name\">String</span> key <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">getKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>            <span class=\"token class-name\">String</span> value<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>             * åˆ¤æ–­å€¼æ˜¯å¦æ˜¯ç©ºçš„</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>             */</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                value <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                value <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>             * æŠŠ key å’Œ value æ·»åŠ åˆ° formbody ä¸­</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>             */</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            builder<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"postå¼‚æ­¥è¯·æ±‚jsonä¼ å‚\"><a class=\"anchor\" href=\"#postå¼‚æ­¥è¯·æ±‚jsonä¼ å‚\">#</a> post å¼‚æ­¥è¯·æ±‚ json ä¼ å‚</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>     * post å¼‚æ­¥è¯·æ±‚ json ä¼ å‚</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>     * é€šè¿‡ response.body ().string () è·å–è¿”å›çš„å­—ç¬¦ä¸²</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     * å¼‚æ­¥è¿”å›å€¼ä¸èƒ½æ›´æ–° UIï¼Œè¦å¼€å¯æ–°çº¿ç¨‹</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>     *</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     * @param url</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>     * @return</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">postAsynRequireJson</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> url<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> params<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MyDataCallBack</span> myDataCallBack<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>params  <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        params <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token operator\">&amp;</span>lt<span class=\"token punctuation\">;</span><span class=\"token operator\">&amp;</span>gt<span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token comment\">// å°† map è½¬æ¢æˆ json, éœ€è¦å¼•å…¥ Gson åŒ…</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token class-name\">String</span> mapToJson <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Gson</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toJson</span><span class=\"token punctuation\">(</span>params<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> realURL <span class=\"token operator\">=</span> <span class=\"token function\">urlJoint</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">final</span> <span class=\"token class-name\">Request</span> request <span class=\"token operator\">=</span> <span class=\"token function\">buildJsonPostRequest</span><span class=\"token punctuation\">(</span>realURL<span class=\"token punctuation\">,</span> mapToJson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token class-name\">Call</span> call <span class=\"token operator\">=</span> okHttpClient<span class=\"token punctuation\">.</span><span class=\"token function\">newCall</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        myDataCallBack<span class=\"token punctuation\">.</span><span class=\"token function\">onBefore</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token comment\">// è¯·æ±‚åŠ å…¥è°ƒåº¦</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        call<span class=\"token punctuation\">.</span><span class=\"token function\">enqueue</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Callback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onFailure</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Call</span> call<span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>                myDataCallBack<span class=\"token punctuation\">.</span><span class=\"token function\">requestFailure</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>            <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onResponse</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Call</span> call<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Response</span> response<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>                responseStrGETAsyn <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// æ­¤å¤„ä¹Ÿå¯ä»¥è§£æä¸º byte [],Reader,InputStream</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>                <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>                    myDataCallBack<span class=\"token punctuation\">.</span><span class=\"token function\">requestSuccess</span><span class=\"token punctuation\">(</span>responseStrGETAsyn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>                    e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>                    <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">.</span><span class=\"token function\">e</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span>POSTå¼‚æ­¥è¯·æ±‚ä¸º<span class=\"token class-name\">String</span>è§£æå¼‚å¸¸å¤±è´¥<span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span> <span class=\"token operator\">+</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>        myDataCallBack<span class=\"token punctuation\">.</span><span class=\"token function\">onAfter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>        <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">.</span><span class=\"token function\">e</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span>POSTå¼‚æ­¥è¯·æ±‚è§£æä¸º<span class=\"token class-name\">String</span>å¼‚å¸¸<span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span> <span class=\"token operator\">+</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>        e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token keyword\">return</span> responseStrGETAsyn<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"ä»¥jsonæ–¹å¼ä¼ å…¥è¯·æ±‚ä½“\"><a class=\"anchor\" href=\"#ä»¥jsonæ–¹å¼ä¼ å…¥è¯·æ±‚ä½“\">#</a> ä»¥ json æ–¹å¼ä¼ å…¥è¯·æ±‚ä½“</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">*</span><span class=\"token operator\">*</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>     <span class=\"token operator\">*</span> <span class=\"token class-name\">Json_POST</span>è¯·æ±‚å‚æ•°</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>     <span class=\"token operator\">*</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     <span class=\"token operator\">*</span> <span class=\"token annotation punctuation\">@param</span> url  url</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>     <span class=\"token operator\">*</span> <span class=\"token annotation punctuation\">@param</span> json json</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     <span class=\"token operator\">*</span> <span class=\"token annotation punctuation\">@return</span> requestBody</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>     <span class=\"token operator\">*</span><span class=\"token operator\">/</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Request</span> <span class=\"token function\">buildJsonPostRequest</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> url<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> json<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">//        RequestBody requestBody = RequestBody.create(MediaType.parse(\"application/json; charset=utf-8\"), json);</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token class-name\">RequestBody</span> requestBody <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestBody</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>JSON<span class=\"token punctuation\">,</span> json<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Request<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>requestBody<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"ä»¥stringæ–¹å¼ä¼ å…¥è¯·æ±‚ä½“\"><a class=\"anchor\" href=\"#ä»¥stringæ–¹å¼ä¼ å…¥è¯·æ±‚ä½“\">#</a> ä»¥ String æ–¹å¼ä¼ å…¥è¯·æ±‚ä½“</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>     * String_POST è¯·æ±‚å‚æ•°</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>     *</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     * @param url  url</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>     * @param json json</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     * @return requestBody</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Request</span> <span class=\"token function\">buildStringPostRequest</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> url<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> json<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">RequestBody</span> requestBody <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestBody</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>MEDIA_TYPE_MARKDOWN<span class=\"token punctuation\">,</span> json<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Request<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>requestBody<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h1 id=\"æ–‡ä»¶ä¸Šä¼ \"><a class=\"anchor\" href=\"#æ–‡ä»¶ä¸Šä¼ \">#</a> æ–‡ä»¶ä¸Šä¼ ï¼š</h1>\n<h2 id=\"åŸºäºhttpçš„æ–‡ä»¶ä¸Šä¼ ä¼ å…¥æ–‡ä»¶åå’Œkey\"><a class=\"anchor\" href=\"#åŸºäºhttpçš„æ–‡ä»¶ä¸Šä¼ ä¼ å…¥æ–‡ä»¶åå’Œkey\">#</a> åŸºäº http çš„æ–‡ä»¶ä¸Šä¼ ï¼ˆä¼ å…¥æ–‡ä»¶åå’Œ keyï¼‰</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>     * åŸºäº http çš„æ–‡ä»¶ä¸Šä¼ ï¼ˆä¼ å…¥æ–‡ä»¶åå’Œ keyï¼‰</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>     * é€šè¿‡ addFormDataPart</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     *</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>     * @param url            URL çš„ Path éƒ¨åˆ†</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     * @param myDataCallBack è‡ªå®šä¹‰å›è°ƒæ¥å£</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>     *                       å°† file ä½œä¸ºè¯·æ±‚ä½“ä¼ å…¥åˆ°æœåŠ¡ç«¯.</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>     * @param fileKey        æ–‡ä»¶ä¼ å…¥æœåŠ¡å™¨çš„é”® \"image\"</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>     * @fileName: \"pic.png\"</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">upLoadMultiFileSimple</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> url<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> fileName<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> fileKey<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MyDataCallBack</span> myDataCallBack<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">File</span> file <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">File</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Environment</span><span class=\"token punctuation\">.</span><span class=\"token function\">getExternalStorageDirectory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> fileName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token class-name\">RequestBody</span> fileBody <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestBody</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MediaType</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"application/octet-stream\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token class-name\">RequestBody</span> requestBody <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MultipartBody<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">setType</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MultipartBody</span><span class=\"token punctuation\">.</span>FORM<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">addFormDataPart</span><span class=\"token punctuation\">(</span>fileKey<span class=\"token punctuation\">,</span> fileName<span class=\"token punctuation\">,</span> fileBody<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> realURL <span class=\"token operator\">=</span> <span class=\"token function\">urlJoint</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">final</span> <span class=\"token class-name\">Request</span> request <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Request<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>realURL<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>requestBody<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token class-name\">Call</span> call <span class=\"token operator\">=</span> okHttpClient<span class=\"token punctuation\">.</span><span class=\"token function\">newCall</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        myDataCallBack<span class=\"token punctuation\">.</span><span class=\"token function\">onBefore</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token comment\">// è¯·æ±‚åŠ å…¥è°ƒåº¦</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        call<span class=\"token punctuation\">.</span><span class=\"token function\">enqueue</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Callback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>            <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>            <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onFailure</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Call</span> call<span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>                myDataCallBack<span class=\"token punctuation\">.</span><span class=\"token function\">requestFailure</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>            <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>            <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onResponse</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Call</span> call<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Response</span> response<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>                <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>                    myDataCallBack<span class=\"token punctuation\">.</span><span class=\"token function\">requestSuccess</span><span class=\"token punctuation\">(</span>responseStrGETAsyn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>                    e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>                    <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">.</span><span class=\"token function\">e</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span>POSTå¼‚æ­¥æ–‡ä»¶ä¸Šä¼ å¤±è´¥<span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span> <span class=\"token operator\">+</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>        myDataCallBack<span class=\"token punctuation\">.</span><span class=\"token function\">onAfter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>        <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">.</span><span class=\"token function\">e</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span>POSTå¼‚æ­¥æ–‡ä»¶ä¸Šä¼ å¼‚å¸¸<span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span> <span class=\"token operator\">+</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>        e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"åŸºäºhttpçš„æ–‡ä»¶ä¸Šä¼ æ··åˆå‚æ•°å’Œæ–‡ä»¶è¯·æ±‚\"><a class=\"anchor\" href=\"#åŸºäºhttpçš„æ–‡ä»¶ä¸Šä¼ æ··åˆå‚æ•°å’Œæ–‡ä»¶è¯·æ±‚\">#</a> åŸºäº http çš„æ–‡ä»¶ä¸Šä¼ ï¼Œæ··åˆå‚æ•°å’Œæ–‡ä»¶è¯·æ±‚</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>     * åŸºäº http çš„æ–‡ä»¶ä¸Šä¼ ï¼ˆä¼ å…¥æ–‡ä»¶æ•°ç»„å’Œ keyï¼‰æ··åˆå‚æ•°å’Œæ–‡ä»¶è¯·æ±‚</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>     * é€šè¿‡ addFormDataPart å¯ä»¥æ·»åŠ å¤šä¸ªä¸Šä¼ çš„æ–‡ä»¶</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     *</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>     * @param url            URL çš„ Path éƒ¨åˆ†</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     * @param myDataCallBack è‡ªå®šä¹‰å›è°ƒæ¥å£</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>     *                       å°† file ä½œä¸ºè¯·æ±‚ä½“ä¼ å…¥åˆ°æœåŠ¡ç«¯.</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>     * @param files          ä¸Šä¼ çš„æ–‡ä»¶</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>     * @param fileKeys       ä¸Šä¼ çš„æ–‡ä»¶ key é›†åˆ</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">upLoadMultiFile</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> url<span class=\"token punctuation\">,</span> <span class=\"token class-name\">File</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> files<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> fileKeys<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> params<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MyDataCallBack</span> myDataCallBack<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>params  <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            params <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> realURL <span class=\"token operator\">=</span> <span class=\"token function\">urlJoint</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token class-name\">FormBody<span class=\"token punctuation\">.</span>Builder</span> builder <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormBody<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token function\">addMapParmsToFromBody</span><span class=\"token punctuation\">(</span>params<span class=\"token punctuation\">,</span> builder<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token class-name\">RequestBody</span> requestBody <span class=\"token operator\">=</span> builder<span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token class-name\">MultipartBody<span class=\"token punctuation\">.</span>Builder</span> multipartBody <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MultipartBody<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        multipartBody<span class=\"token punctuation\">.</span><span class=\"token function\">setType</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MultipartBody</span><span class=\"token punctuation\">.</span>ALTERNATIVE<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">addPart</span><span class=\"token punctuation\">(</span>requestBody<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>files <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token class-name\">RequestBody</span> fileBody <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&amp;</span>lt<span class=\"token punctuation\">;</span> files<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            <span class=\"token class-name\">File</span> file <span class=\"token operator\">=</span> files<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token class-name\">String</span> fileName <span class=\"token operator\">=</span> file<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            fileBody <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestBody</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MediaType</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token function\">guessMimeType</span><span class=\"token punctuation\">(</span>fileName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            <span class=\"token comment\">//TODO æ ¹æ®æ–‡ä»¶åè®¾ç½® contentType</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>            multipartBody<span class=\"token punctuation\">.</span><span class=\"token function\">addPart</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Headers</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span><span class=\"token class-name\">Content</span><span class=\"token operator\">-</span><span class=\"token class-name\">Disposition</span><span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>                    <span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span>form<span class=\"token operator\">-</span>data<span class=\"token punctuation\">;</span> name<span class=\"token operator\">=</span>\\<span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span><span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span> <span class=\"token operator\">+</span> fileKeys<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span>\\<span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> filename<span class=\"token operator\">=</span>\\<span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span><span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span> <span class=\"token operator\">+</span> fileName <span class=\"token operator\">+</span> <span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span>\\<span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span><span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>                    fileBody<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token keyword\">final</span> <span class=\"token class-name\">Request</span> request <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Request<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>            <span class=\"token punctuation\">.</span><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>realURL<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>            <span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>multipartBody<span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>            <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token class-name\">Call</span> call <span class=\"token operator\">=</span> okHttpClient<span class=\"token punctuation\">.</span><span class=\"token function\">newCall</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        myDataCallBack<span class=\"token punctuation\">.</span><span class=\"token function\">onBefore</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>        <span class=\"token comment\">// è¯·æ±‚åŠ å…¥è°ƒåº¦</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>        call<span class=\"token punctuation\">.</span><span class=\"token function\">enqueue</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Callback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>            <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>            <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onFailure</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Call</span> call<span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>                myDataCallBack<span class=\"token punctuation\">.</span><span class=\"token function\">requestFailure</span><span class=\"token punctuation\">(</span>call<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>            <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>            <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onResponse</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Call</span> call<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Response</span> response<span class=\"token punctuation\">)</span>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>                <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>                    myDataCallBack<span class=\"token punctuation\">.</span><span class=\"token function\">requestSuccess</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>                    e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>                    <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">.</span><span class=\"token function\">e</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span>POSTå¼‚æ­¥æ–‡ä»¶ä¸Šä¼ å¤±è´¥<span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span> <span class=\"token operator\">+</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>        myDataCallBack<span class=\"token punctuation\">.</span><span class=\"token function\">onAfter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>        <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">.</span><span class=\"token function\">e</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span>POSTå¼‚æ­¥æ–‡ä»¶ä¸Šä¼ å¼‚å¸¸<span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span> <span class=\"token operator\">+</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>        e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>  <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> <span class=\"token function\">guessMimeType</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> fileName<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>        <span class=\"token class-name\">FileNameMap</span> fileNameMap <span class=\"token operator\">=</span> <span class=\"token class-name\">URLConnection</span><span class=\"token punctuation\">.</span><span class=\"token function\">getFileNameMap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>        <span class=\"token class-name\">String</span> contentTypeFor <span class=\"token operator\">=</span> fileNameMap<span class=\"token punctuation\">.</span><span class=\"token function\">getContentTypeFor</span><span class=\"token punctuation\">(</span>fileName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>contentTypeFor  <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>            contentTypeFor <span class=\"token operator\">=</span> <span class=\"token string\">\"application/octet-stream\"</span><span class=\"token punctuation\">;</span>        <span class=\"token punctuation\">&#125;</span>        <span class=\"token keyword\">return</span> contentTypeFor<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"æ–‡ä»¶ä¸‹è½½\"><a class=\"anchor\" href=\"#æ–‡ä»¶ä¸‹è½½\">#</a> æ–‡ä»¶ä¸‹è½½</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>     * æ–‡ä»¶ä¸‹è½½</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>     * @param url path è·¯å¾„</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     * @param destFileDir æœ¬åœ°å­˜å‚¨çš„æ–‡ä»¶å¤¹è·¯å¾„</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>     * @param myDataCallBack è‡ªå®šä¹‰å›è°ƒæ¥å£</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">downLoadFileAsyn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> url<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> destFileDir<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MyDataCallBack</span> myDataCallBack<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token class-name\">String</span> realURL<span class=\"token operator\">=</span><span class=\"token function\">urlJoint</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">Request</span> request<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Request<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>realURL<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">Call</span> call<span class=\"token operator\">=</span>okHttpClient<span class=\"token punctuation\">.</span><span class=\"token function\">newCall</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        call<span class=\"token punctuation\">.</span><span class=\"token function\">enqueue</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Callback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onFailure</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Call</span> call<span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                myDataCallBack<span class=\"token punctuation\">.</span><span class=\"token function\">requestFailure</span><span class=\"token punctuation\">(</span>call<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onResponse</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Call</span> call<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Response</span> response<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token class-name\">InputStream</span> is <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token keyword\">byte</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> buf <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token keyword\">byte</span><span class=\"token punctuation\">[</span><span class=\"token number\">2048</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            <span class=\"token keyword\">int</span> len <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token class-name\">FileOutputStream</span> fos <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            is <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">byteStream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token class-name\">File</span> file <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">File</span><span class=\"token punctuation\">(</span>destFileDir<span class=\"token punctuation\">,</span> <span class=\"token function\">getFileName</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>                fos <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FileOutputStream</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>                <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>len <span class=\"token operator\">=</span> is<span class=\"token punctuation\">.</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span>buf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>                <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>                    fos<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>buf<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>                fos<span class=\"token punctuation\">.</span><span class=\"token function\">flush</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>                <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">.</span><span class=\"token function\">e</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span>æ–‡ä»¶ä¸‹è½½å¼‚å¸¸ï¼š<span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span><span class=\"token punctuation\">,</span>e<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>                e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">finally</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>is <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>                    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>                        is<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>                    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>                        <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">.</span><span class=\"token function\">e</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span>æ–‡ä»¶æµå…³é—­å¼‚å¸¸ï¼š<span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span><span class=\"token punctuation\">,</span>e<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>                        e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>                    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fos <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>                    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>                        fos<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>                    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>                        <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">.</span><span class=\"token function\">e</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span>æ–‡ä»¶æµå…³é—­å¼‚å¸¸ï¼š<span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span><span class=\"token punctuation\">,</span>e<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>                        e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>                    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>            <span class=\"token comment\">// å¦‚æœä¸‹è½½æ–‡ä»¶æˆåŠŸï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ–‡ä»¶çš„ç»å¯¹è·¯å¾„</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>            <span class=\"token function\">sendSuccessResultCallback</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span><span class=\"token function\">getAbsolutePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> myDataCallBack<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>            myDataCallBack<span class=\"token punctuation\">.</span><span class=\"token function\">requestSuccess</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token operator\">%</span><span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getFileName</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> url<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>        <span class=\"token keyword\">int</span> separatorIndex <span class=\"token operator\">=</span> url<span class=\"token punctuation\">.</span><span class=\"token function\">lastIndexOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>separatorIndex <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> url <span class=\"token operator\">:</span> url<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span>separatorIndex <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> url<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token operator\">&amp;&amp;</span><span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">sendSuccessResultCallback</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> absolutePath<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MyDataCallBack</span> myDataCallBack<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token class-name\">ThreadPoolUtil</span><span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Runnable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token annotation punctuation\">@Override</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>myDataCallBack<span class=\"token operator\">!=</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span> myDataCallBack<span class=\"token punctuation\">.</span><span class=\"token function\">requestSuccess</span><span class=\"token punctuation\">(</span>absolutePath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"è‡ªå®šä¹‰callbackå›è°ƒmydatacallback\"><a class=\"anchor\" href=\"#è‡ªå®šä¹‰callbackå›è°ƒmydatacallback\">#</a> è‡ªå®šä¹‰ CallBack å›è°ƒ MyDataCallBack</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span>ytf<span class=\"token punctuation\">.</span>httpdemo<span class=\"token punctuation\">.</span>okhttp</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>google<span class=\"token punctuation\">.</span>gson<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">GsonTypes</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">InputStream</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Reader</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>reflect<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ParameterizedType</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>reflect<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Type</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">okhttp3<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Request</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>@author ytf</pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>æ­£å¸¸æƒ…å†µä¸‹å¤šæ•°è¿”å›çš„æ˜¯ string æ ¼å¼ï¼Œ</pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>å¦‚æœè¦æ¥æ”¶è¿”å›å…¶ä»–ç±»å‹çš„æ•°æ®å¯ä»¥ä¾ç…§éœ€æ±‚æ”¾å¼€æ³¨é‡Šï¼Œ</pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>ä½¿ç”¨å‚ç…§åŒæ­¥è¯·æ±‚åšæ³•</pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>/public abstract class MyDataCallBack&lt;T> &#123;  // è¯·æ±‚æ•°æ®çš„è¿”å›ç±»å‹ï¼ŒåŒ…å«å¸¸è§çš„ï¼ˆBeanï¼ŒList ç­‰ï¼‰  Type mType;</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  public MyDataCallBack () &#123;//        mType=getSuperclassTypeParameter (getClass ());  &#125;</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  /**</pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>é€šè¿‡åå°„è¿”å›æƒ³è¦çš„ç±»å‹</pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>@param subclass</pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>@return</pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>/</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>static Type getSuperclassTypeParameter (Class&lt;?> subclass) &#123;  Type superclass = subclass.getGenericSuperclass ();  if (superclass instanceof Class) &#123;</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  throw new RuntimeException (&amp;quot; æœªçŸ¥è¿”å›ç±»å‹ & amp;quot;);</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  &#125;  ParameterizedType parameterized = (ParameterizedType) superclass;  return GsonTypes.canonicalize (parameterized.getActualTypeArguments ()[0]);&#125;/**</pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>åœ¨è¯·æ±‚ä¹‹å‰çš„æ–¹æ³•ï¼Œä¸€èˆ¬ç”¨äºåŠ è½½è¿›åº¦æ¡† ProgressBar å±•ç¤º</pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>@param request</pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>/public  abstract void onBefore (Request request);</pre></td></tr><tr><td data-num=\"37\"></td><td><pre>public abstract void requestSuccess (T result);</pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre></pre></td></tr><tr><td data-num=\"40\"></td><td><pre></pre></td></tr><tr><td data-num=\"41\"></td><td><pre></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>//    void requestSuccess (Reader result) throws Exception;//    void requestSuccess (InputStream result) throws Exception;//    void requestSuccess (byte [] result) throws Exception;</pre></td></tr><tr><td data-num=\"43\"></td><td><pre>public abstract void requestFailure (Request request, IOException e);</pre></td></tr><tr><td data-num=\"44\"></td><td><pre></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>/**</pre></td></tr><tr><td data-num=\"46\"></td><td><pre> * åœ¨è¯·æ±‚ä¹‹åçš„æ–¹æ³•ï¼Œä¸€èˆ¬ç”¨äºåŠ è½½æ¡†éšè—</pre></td></tr><tr><td data-num=\"47\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onAfter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"è‡ªå®šä¹‰æ—¥å¿—æ‹¦æˆªå™¨\"><a class=\"anchor\" href=\"#è‡ªå®šä¹‰æ—¥å¿—æ‹¦æˆªå™¨\">#</a> è‡ªå®šä¹‰æ—¥å¿—æ‹¦æˆªå™¨</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span>ytf<span class=\"token punctuation\">.</span>httpdemo<span class=\"token punctuation\">.</span>okhttp</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>orhanobut<span class=\"token punctuation\">.</span>logger<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Logger</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Locale</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">okhttp3<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Interceptor</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">okhttp3<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Request</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">okhttp3<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Response</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>@author ytf è‡ªå®šä¹‰æ‹¦æˆªå™¨ Chain å¯¹è±¡å¯ä»¥æ‹¿åˆ°å½“å‰è¯·æ±‚çš„ Request å¯¹è±¡ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥å¯¹ Request åšäºŒæ¬¡å¤„ç†ï¼Œ æœ€åç”Ÿæˆæˆ‘ä»¬éœ€è¦çš„è¯·æ±‚ï¼Œç„¶åå†é€šè¿‡ç½‘ç»œå‘é€è¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼Œè¿™æ ·å°±å®Œæˆäº†ä¸€æ¬¡æ‹¦æˆª /public class HeaderInterceptor implements Interceptor &#123;@Override public Response intercept (Chain chain) throws IOException &#123; Request request = chain.request (); Logger.d (String.format (&amp;quot;Sending request % s on % s% n% s&amp;quot;, request.url (), chain.connection (), request.headers ())); long t1 = System.nanoTime (); okhttp3.Response response = chain.proceed (chain.request ()); long t2 = System.nanoTime (); Logger.d (String.format (Locale.getDefault (), &amp;quot;Received response for % s in %.1fms% n% s&amp;quot;, response.request ().url (), (t2 - t1) / 1e6d, response.headers ())); okhttp3.MediaType mediaType = response.body ().contentType (); String content = response.body ().string (); Logger.json (content); Response response1=chain.proceed (request); Logger.d (&amp;quot; è¿”å› responseï¼š&amp;quot;,response1.toString ()); return response.newBuilder () .header (&amp;quot;Authorization&amp;quot;, &amp;quot; è¯·æ±‚å¤´æˆæƒä¿¡æ¯æ‹¦æˆª & amp;quot;) .body (okhttp3.ResponseBody.create (mediaType, content)) .build ();&#125;&#125;</span></pre></td></tr></table></figure><h2 id=\"è‡ªå®šä¹‰ç½‘ç»œæ‹¦æˆªå™¨\"><a class=\"anchor\" href=\"#è‡ªå®šä¹‰ç½‘ç»œæ‹¦æˆªå™¨\">#</a> è‡ªå®šä¹‰ç½‘ç»œæ‹¦æˆªå™¨</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span>ytf<span class=\"token punctuation\">.</span>httpdemo<span class=\"token punctuation\">.</span>okhttp</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">android<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Context</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">android<span class=\"token punctuation\">.</span>net<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ConnectivityManager</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">android<span class=\"token punctuation\">.</span>net<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">NetworkInfo</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span>ytf<span class=\"token punctuation\">.</span>httpdemo<span class=\"token punctuation\">.</span></span>APP<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">okhttp3<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">CacheControl</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">okhttp3<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Interceptor</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">okhttp3<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Request</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">okhttp3<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Response</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>@author ytf</pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>è®¾ç½®ç½‘ç»œæ‹¦æˆªå™¨ï¼Œå®ç°åœ¨çº¿å’Œç¦»çº¿ç¼“å­˜</pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>/public class CacheInterceptor implements Interceptor &#123;</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  @Override  public Response intercept (Chain chain) throws IOException &#123;</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  Request request = chain.request ();</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  if (!isNetworkConnected ()) &#123;</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      request = request.newBuilder ()</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>              .cacheControl (CacheControl.FORCE_CACHE)</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>              .build ();</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  &#125;</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  Response originalResponse = chain.proceed (request);</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  if (isNetworkConnected ()) &#123;</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>      // æœ‰ç½‘çš„æ—¶å€™è¯»æ¥å£ä¸Šçš„ @Headers é‡Œçš„é…ç½®ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œç»Ÿä¸€çš„è®¾ç½® (æ³¨æ‰éƒ¨åˆ†)</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>      String cacheControl = request.cacheControl ().toString ();</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>      return originalResponse.newBuilder ()</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>              .header (&amp;quot;Cache-Control&amp;quot;, cacheControl)</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>              //.header (&amp;quot;Cache-Control&amp;quot;, &amp;quot;max-age=3600&amp;quot;)</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>              .removeHeader (&amp;quot;Pragma&amp;quot;) // æ¸…é™¤å¤´ä¿¡æ¯ï¼Œå› ä¸ºæœåŠ¡å™¨å¦‚æœä¸æ”¯æŒï¼Œä¼šè¿”å›ä¸€äº›å¹²æ‰°ä¿¡æ¯ï¼Œä¸æ¸…é™¤ä¸‹é¢æ— æ³•ç”Ÿæ•ˆ</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>              .build ();</pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  &#125; else &#123;</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>//1. ä¸éœ€è¦ç¼“å­˜ï¼šCache-Control: no-cache æˆ– Cache-Control: max-age=0//2. å¦‚æœæƒ³å…ˆæ˜¾ç¤ºæ•°æ®ï¼Œåœ¨è¯·æ±‚ã€‚ï¼ˆç±»ä¼¼äºå¾®åšç­‰ï¼‰ï¼šCache-Control: only-if-cached</pre></td></tr><tr><td data-num=\"34\"></td><td><pre>      int maxAge = 60 * 60;</pre></td></tr><tr><td data-num=\"35\"></td><td><pre>      return originalResponse.newBuilder ()</pre></td></tr><tr><td data-num=\"36\"></td><td><pre>              .header (&amp;quot;Cache-Control&amp;quot;, &amp;quot;public, only-if-cached, max-age=&amp;quot; + maxAge)</pre></td></tr><tr><td data-num=\"37\"></td><td><pre>              .removeHeader (&amp;quot;Pragma&amp;quot;)</pre></td></tr><tr><td data-num=\"38\"></td><td><pre>              .build ();</pre></td></tr><tr><td data-num=\"39\"></td><td><pre>  &#125;</pre></td></tr><tr><td data-num=\"40\"></td><td><pre>  &#125;</pre></td></tr><tr><td data-num=\"41\"></td><td><pre>  /**</pre></td></tr><tr><td data-num=\"42\"></td><td><pre></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>åˆ¤æ–­ç½‘ç»œæ˜¯å¦å¯ç”¨çš„æ–¹æ³•</pre></td></tr><tr><td data-num=\"44\"></td><td><pre></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>@return</pre></td></tr><tr><td data-num=\"46\"></td><td><pre>/private boolean isNetworkConnected () &#123;  ConnectivityManager connectivity = (ConnectivityManager) APP.getInstance ()      .getSystemService (Context.CONNECTIVITY_SERVICE);</pre></td></tr><tr><td data-num=\"47\"></td><td><pre>  if (null != connectivity) &#123;  NetworkInfo info = connectivity.getActiveNetworkInfo ();</pre></td></tr><tr><td data-num=\"48\"></td><td><pre>  if (null != info &amp;amp;&amp;amp; info.isConnected ()) &#123;</pre></td></tr><tr><td data-num=\"49\"></td><td><pre>      if (info.getState ()  NetworkInfo.State.CONNECTED) &#123;</pre></td></tr><tr><td data-num=\"50\"></td><td><pre>          return true;</pre></td></tr><tr><td data-num=\"51\"></td><td><pre>      &#125;</pre></td></tr><tr><td data-num=\"52\"></td><td><pre>  &#125;</pre></td></tr><tr><td data-num=\"53\"></td><td><pre>  &#125;  return false;&#125;</pre></td></tr><tr><td data-num=\"54\"></td><td><pre></pre></td></tr><tr><td data-num=\"55\"></td><td><pre></pre></td></tr><tr><td data-num=\"56\"></td><td><pre></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>&#125;</span></pre></td></tr></table></figure><h2 id=\"å·¥å…·ç±»è¯¦ç»†ä»£ç \"><a class=\"anchor\" href=\"#å·¥å…·ç±»è¯¦ç»†ä»£ç \">#</a> å·¥å…·ç±»è¯¦ç»†ä»£ç ï¼š</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span>ytf<span class=\"token punctuation\">.</span>httpdemo<span class=\"token punctuation\">.</span>okhttp</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">android<span class=\"token punctuation\">.</span>os<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Environment</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span>ytf<span class=\"token punctuation\">.</span>httpdemo<span class=\"token punctuation\">.</span></span>APP<span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span>ytf<span class=\"token punctuation\">.</span>httpdemo<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Constant</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span>ytf<span class=\"token punctuation\">.</span>httpdemo<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ThreadPoolUtil</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>google<span class=\"token punctuation\">.</span>gson<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Gson</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>google<span class=\"token punctuation\">.</span>gson<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">GsonTypes</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>orhanobut<span class=\"token punctuation\">.</span>logger<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Logger</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">File</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">FileNotFoundException</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">FileOutputStream</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">InputStream</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Reader</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>reflect<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ParameterizedType</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>reflect<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Type</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>net<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ConnectException</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>net<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">FileNameMap</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>net<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SocketException</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>net<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SocketTimeoutException</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>net<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">URLConnection</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>net<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">UnknownHostException</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ParameterMetaData</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ArrayList</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HashMap</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">List</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Set</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">TimeUnit</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">okhttp3<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Cache</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">okhttp3<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Call</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">okhttp3<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Callback</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">okhttp3<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Cookie</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">okhttp3<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">CookieJar</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">okhttp3<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">FormBody</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">okhttp3<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Headers</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">okhttp3<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpUrl</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">okhttp3<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MediaType</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">okhttp3<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MultipartBody</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">okhttp3<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">OkHttpClient</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">okhttp3<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Request</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">okhttp3<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestBody</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">okhttp3<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Response</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">import</span> <span class=\"token namespace\">okhttp3<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ResponseBody</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>@author ytf</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>/public class OkHTTPManger &#123;private static OkHttpClient okHttpClient;  private volatile static OkHTTPManger instance;// é˜²æ­¢å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®  // æäº¤ json æ•°æ®  private static final MediaType JSON = MediaType.parse (\"application/json;charset=utf-8\");  // æäº¤å­—ç¬¦ä¸²æ•°æ®  private static final MediaType MEDIA_TYPE_MARKDOWN = MediaType.parse (\"text/x-markdown;charset=utf-8\");  private static String responseStrGETAsyn;</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  private final HashMap&lt;String, List&lt;Cookie>> cookieStore = new HashMap&lt;>();// ä½¿ç”¨ getCacheDir () æ¥ä½œä¸ºç¼“å­˜æ–‡ä»¶çš„å­˜æ”¾è·¯å¾„ï¼ˆ/data/data/ åŒ…å /cacheï¼‰ ï¼Œ// å¦‚æœä½ æƒ³çœ‹åˆ°ç¼“å­˜æ–‡ä»¶å¯ä»¥ä¸´æ—¶ä½¿ç”¨ getExternalCacheDir ()ï¼ˆ/sdcard/Android/data/ åŒ…å /cacheï¼‰ã€‚  private static File cacheFile;  private static Cache cache;</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  public OkHTTPManger () &#123;//        if (APP.getInstance ().getApplicationContext ().getCacheDir ()!=null)&#123;//            cacheFile = new File (APP.getInstance ().getCacheDir (), \"Test\");//            cache = new Cache (cacheFile, 1024 * 1024 * 10);//        &#125;</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  okHttpClient = new OkHttpClient ();</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  okHttpClient.newBuilder ()</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>//                .addInterceptor (new HeaderInterceptor ())//                .addNetworkInterceptor (new CacheInterceptor ())//                .cache (cache)</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>          .connectTimeout (10, TimeUnit.SECONDS)</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>          .readTimeout (10, TimeUnit.SECONDS)</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>          .writeTimeout (10, TimeUnit.SECONDS)</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>          .cookieJar (new CookieJar () &#123;</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>              @Override</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>              public void saveFromResponse (HttpUrl url, List&amp;lt;Cookie&amp;gt; cookies) &#123;</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>                  cookieStore.put (url.host (), cookies);</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>              &#125;</pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>              @Override</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>              public List&amp;lt;Cookie&amp;gt; loadForRequest (HttpUrl url) &#123;</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>                  List&amp;lt;Cookie&amp;gt; cookies = cookieStore.get (url.host ());</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>                  return cookies != null ? cookies : new ArrayList&amp;lt;Cookie&amp;gt;();</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>// è‡ªåŠ¨ç®¡ç† Cookie å‘é€ Request éƒ½ä¸ç”¨ç®¡ Cookie è¿™ä¸ªå‚æ•°ä¹Ÿä¸ç”¨å» response è·å–æ–° Cookie ä»€ä¹ˆçš„äº†ã€‚è¿˜èƒ½é€šè¿‡ cookieStore è·å–å½“å‰ä¿å­˜çš„ Cookieã€‚</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>              &#125;</pre></td></tr><tr><td data-num=\"32\"></td><td><pre>          &#125;);</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  &#125;</pre></td></tr><tr><td data-num=\"34\"></td><td><pre>  /**</pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>æ‡’æ±‰å¼åŠ é”å•ä¾‹æ¨¡å¼</pre></td></tr><tr><td data-num=\"37\"></td><td><pre></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>@return</pre></td></tr><tr><td data-num=\"39\"></td><td><pre></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>/public static OkHTTPManger getInstance () &#123;  if (instance  null) &#123;</pre></td></tr><tr><td data-num=\"41\"></td><td><pre>  synchronized (OkHTTPManger.class) &#123;</pre></td></tr><tr><td data-num=\"42\"></td><td><pre>      if (instance  null) &#123;</pre></td></tr><tr><td data-num=\"43\"></td><td><pre>          instance = new OkHTTPManger ();</pre></td></tr><tr><td data-num=\"44\"></td><td><pre>      &#125;</pre></td></tr><tr><td data-num=\"45\"></td><td><pre>  &#125;</pre></td></tr><tr><td data-num=\"46\"></td><td><pre>  &#125;  return instance;&#125;</pre></td></tr><tr><td data-num=\"47\"></td><td><pre>/**</pre></td></tr><tr><td data-num=\"48\"></td><td><pre></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>get åŒæ­¥è¯·æ±‚ä¸éœ€è¦ä¼ å‚æ•°</pre></td></tr><tr><td data-num=\"50\"></td><td><pre></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>é€šè¿‡ response.body ().string () è·å–è¿”å›çš„å­—ç¬¦ä¸²</pre></td></tr><tr><td data-num=\"52\"></td><td><pre></pre></td></tr><tr><td data-num=\"53\"></td><td><pre></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>@param url</pre></td></tr><tr><td data-num=\"55\"></td><td><pre></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>@return</pre></td></tr><tr><td data-num=\"57\"></td><td><pre></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>/public String getSyncBackString (String url) &#123;  Request request = new Request.Builder ()</pre></td></tr><tr><td data-num=\"59\"></td><td><pre>      .url (url)</pre></td></tr><tr><td data-num=\"60\"></td><td><pre>      .build ();</pre></td></tr><tr><td data-num=\"61\"></td><td><pre>  Call call = okHttpClient.newCall (request);  try &#123;</pre></td></tr><tr><td data-num=\"62\"></td><td><pre>  Response response = call.execute ();</pre></td></tr><tr><td data-num=\"63\"></td><td><pre>  // å°† response è½¬åŒ–æˆ String</pre></td></tr><tr><td data-num=\"64\"></td><td><pre>  String responseStr = response.body ().string ();</pre></td></tr><tr><td data-num=\"65\"></td><td><pre>  return responseStr;</pre></td></tr><tr><td data-num=\"66\"></td><td><pre>  &#125; catch (IOException e) &#123;</pre></td></tr><tr><td data-num=\"67\"></td><td><pre>  Logger.e (&amp;quot;GET åŒæ­¥è¯·æ±‚è§£æä¸º String å¼‚å¸¸ & amp;quot; + e.toString ());</pre></td></tr><tr><td data-num=\"68\"></td><td><pre>  e.printStackTrace ();</pre></td></tr><tr><td data-num=\"69\"></td><td><pre>  &#125;  return null;&#125;</pre></td></tr><tr><td data-num=\"70\"></td><td><pre>/**</pre></td></tr><tr><td data-num=\"71\"></td><td><pre></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>get åŒæ­¥è¯·æ±‚</pre></td></tr><tr><td data-num=\"73\"></td><td><pre></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>é€šè¿‡ response.body ().bytes () è·å–è¿”å›çš„äºŒè¿›åˆ¶å­—èŠ‚æ•°ç»„</pre></td></tr><tr><td data-num=\"75\"></td><td><pre></pre></td></tr><tr><td data-num=\"76\"></td><td><pre></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>@param url</pre></td></tr><tr><td data-num=\"78\"></td><td><pre></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>@return</pre></td></tr><tr><td data-num=\"80\"></td><td><pre></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>/public byte [] getSyncBackByteArray (String url) &#123;  Request request = new Request.Builder ()</pre></td></tr><tr><td data-num=\"82\"></td><td><pre>      .url (url)</pre></td></tr><tr><td data-num=\"83\"></td><td><pre>      .build ();</pre></td></tr><tr><td data-num=\"84\"></td><td><pre>  Call call = okHttpClient.newCall (request);  try &#123;</pre></td></tr><tr><td data-num=\"85\"></td><td><pre>  Response response = call.execute ();</pre></td></tr><tr><td data-num=\"86\"></td><td><pre>  // å°† response è½¬åŒ–æˆ String</pre></td></tr><tr><td data-num=\"87\"></td><td><pre>  byte [] responseStr = response.body ().bytes ();</pre></td></tr><tr><td data-num=\"88\"></td><td><pre>  return responseStr;</pre></td></tr><tr><td data-num=\"89\"></td><td><pre>  &#125; catch (IOException e) &#123;</pre></td></tr><tr><td data-num=\"90\"></td><td><pre>  Logger.e (&amp;quot;GET åŒæ­¥è¯·æ±‚è§£æä¸º byte æ•°ç»„å¼‚å¸¸ & amp;quot; + e.toString ());</pre></td></tr><tr><td data-num=\"91\"></td><td><pre>  e.printStackTrace ();</pre></td></tr><tr><td data-num=\"92\"></td><td><pre>  &#125;  return null;&#125;</pre></td></tr><tr><td data-num=\"93\"></td><td><pre>/**</pre></td></tr><tr><td data-num=\"94\"></td><td><pre></pre></td></tr><tr><td data-num=\"95\"></td><td><pre>get åŒæ­¥è¯·æ±‚</pre></td></tr><tr><td data-num=\"96\"></td><td><pre></pre></td></tr><tr><td data-num=\"97\"></td><td><pre>é€šè¿‡ response.body ().byteStream () è·å–è¿”å›çš„äºŒè¿›åˆ¶å­—èŠ‚æµ</pre></td></tr><tr><td data-num=\"98\"></td><td><pre></pre></td></tr><tr><td data-num=\"99\"></td><td><pre></pre></td></tr><tr><td data-num=\"100\"></td><td><pre>@param url</pre></td></tr><tr><td data-num=\"101\"></td><td><pre></pre></td></tr><tr><td data-num=\"102\"></td><td><pre>@return</pre></td></tr><tr><td data-num=\"103\"></td><td><pre></pre></td></tr><tr><td data-num=\"104\"></td><td><pre>/public InputStream getSyncBackByteStream (String url) &#123;  Request request = new Request.Builder ()</pre></td></tr><tr><td data-num=\"105\"></td><td><pre>      .url (url)</pre></td></tr><tr><td data-num=\"106\"></td><td><pre>      .build ();</pre></td></tr><tr><td data-num=\"107\"></td><td><pre>  Call call = okHttpClient.newCall (request);  try &#123;</pre></td></tr><tr><td data-num=\"108\"></td><td><pre>  Response response = call.execute ();</pre></td></tr><tr><td data-num=\"109\"></td><td><pre>  // å°† response è½¬åŒ–æˆ String</pre></td></tr><tr><td data-num=\"110\"></td><td><pre>  InputStream responseStr = response.body ().byteStream ();</pre></td></tr><tr><td data-num=\"111\"></td><td><pre>  return responseStr;</pre></td></tr><tr><td data-num=\"112\"></td><td><pre>  &#125; catch (IOException e) &#123;</pre></td></tr><tr><td data-num=\"113\"></td><td><pre>  Logger.e (&amp;quot;GET åŒæ­¥è¯·æ±‚è§£æä¸º String å¼‚å¸¸ & amp;quot; + e.toString ());</pre></td></tr><tr><td data-num=\"114\"></td><td><pre>  e.printStackTrace ();</pre></td></tr><tr><td data-num=\"115\"></td><td><pre>  &#125;  return null;&#125;</pre></td></tr><tr><td data-num=\"116\"></td><td><pre>/**</pre></td></tr><tr><td data-num=\"117\"></td><td><pre></pre></td></tr><tr><td data-num=\"118\"></td><td><pre>get åŒæ­¥è¯·æ±‚</pre></td></tr><tr><td data-num=\"119\"></td><td><pre></pre></td></tr><tr><td data-num=\"120\"></td><td><pre>é€šè¿‡ response.body ().byteStream () è·å–è¿”å›çš„äºŒè¿›åˆ¶å­—èŠ‚æµ</pre></td></tr><tr><td data-num=\"121\"></td><td><pre></pre></td></tr><tr><td data-num=\"122\"></td><td><pre></pre></td></tr><tr><td data-num=\"123\"></td><td><pre>@param url</pre></td></tr><tr><td data-num=\"124\"></td><td><pre></pre></td></tr><tr><td data-num=\"125\"></td><td><pre>@return</pre></td></tr><tr><td data-num=\"126\"></td><td><pre></pre></td></tr><tr><td data-num=\"127\"></td><td><pre>/public Reader getSyncBackCharReader (String url) &#123;  Request request = new Request.Builder ()</pre></td></tr><tr><td data-num=\"128\"></td><td><pre>      .url (url)</pre></td></tr><tr><td data-num=\"129\"></td><td><pre>      .build ();</pre></td></tr><tr><td data-num=\"130\"></td><td><pre>  Call call = okHttpClient.newCall (request);  try &#123;</pre></td></tr><tr><td data-num=\"131\"></td><td><pre>  Response response = call.execute ();</pre></td></tr><tr><td data-num=\"132\"></td><td><pre>  // å°† response è½¬åŒ–æˆ String</pre></td></tr><tr><td data-num=\"133\"></td><td><pre>  Reader responseStr = response.body ().charStream ();</pre></td></tr><tr><td data-num=\"134\"></td><td><pre>  return responseStr;</pre></td></tr><tr><td data-num=\"135\"></td><td><pre>  &#125; catch (IOException e) &#123;</pre></td></tr><tr><td data-num=\"136\"></td><td><pre>  Logger.e (&amp;quot;GET åŒæ­¥è¯·æ±‚è§£æä¸º Reader å¼‚å¸¸ & amp;quot; + e.toString ());</pre></td></tr><tr><td data-num=\"137\"></td><td><pre>  e.printStackTrace ();</pre></td></tr><tr><td data-num=\"138\"></td><td><pre>  &#125;  return null;&#125;</pre></td></tr><tr><td data-num=\"139\"></td><td><pre>/**</pre></td></tr><tr><td data-num=\"140\"></td><td><pre></pre></td></tr><tr><td data-num=\"141\"></td><td><pre>get å¼‚æ­¥è¯·æ±‚ä¸ä¼ å‚æ•°</pre></td></tr><tr><td data-num=\"142\"></td><td><pre></pre></td></tr><tr><td data-num=\"143\"></td><td><pre>é€šè¿‡ response.body ().string () è·å–è¿”å›çš„å­—ç¬¦ä¸²</pre></td></tr><tr><td data-num=\"144\"></td><td><pre></pre></td></tr><tr><td data-num=\"145\"></td><td><pre>å¼‚æ­¥è¿”å›å€¼ä¸èƒ½æ›´æ–° UIï¼Œè¦å¼€å¯æ–°çº¿ç¨‹</pre></td></tr><tr><td data-num=\"146\"></td><td><pre></pre></td></tr><tr><td data-num=\"147\"></td><td><pre></pre></td></tr><tr><td data-num=\"148\"></td><td><pre>@param url</pre></td></tr><tr><td data-num=\"149\"></td><td><pre></pre></td></tr><tr><td data-num=\"150\"></td><td><pre>@return</pre></td></tr><tr><td data-num=\"151\"></td><td><pre></pre></td></tr><tr><td data-num=\"152\"></td><td><pre>/public String getAsynBackStringWithoutParms (String url, final MyDataCallBack myDataCallBack) &#123;</pre></td></tr><tr><td data-num=\"153\"></td><td><pre>  final Request request = new Request.Builder ()</pre></td></tr><tr><td data-num=\"154\"></td><td><pre>      .url (url)</pre></td></tr><tr><td data-num=\"155\"></td><td><pre>      .build ();</pre></td></tr><tr><td data-num=\"156\"></td><td><pre>  Call call = okHttpClient.newCall (request);  try &#123;</pre></td></tr><tr><td data-num=\"157\"></td><td><pre>  myDataCallBack.onBefore (request);</pre></td></tr><tr><td data-num=\"158\"></td><td><pre>  // è¯·æ±‚åŠ å…¥è°ƒåº¦</pre></td></tr><tr><td data-num=\"159\"></td><td><pre>  call.enqueue (new Callback () &#123;</pre></td></tr><tr><td data-num=\"160\"></td><td><pre></pre></td></tr><tr><td data-num=\"161\"></td><td><pre>      @Override</pre></td></tr><tr><td data-num=\"162\"></td><td><pre>      public void onFailure (Call call, IOException e) &#123;</pre></td></tr><tr><td data-num=\"163\"></td><td><pre>//                 Logger.e (\"GET å¼‚æ­¥è¯·æ±‚ä¸º String å¤±è´¥\"+e.toString ());</pre></td></tr><tr><td data-num=\"164\"></td><td><pre>          myDataCallBack.requestFailure (request, e);</pre></td></tr><tr><td data-num=\"165\"></td><td><pre>      &#125;</pre></td></tr><tr><td data-num=\"166\"></td><td><pre></pre></td></tr><tr><td data-num=\"167\"></td><td><pre>      @Override</pre></td></tr><tr><td data-num=\"168\"></td><td><pre>      public void onResponse (Call call, Response response) throws IOException &#123;</pre></td></tr><tr><td data-num=\"169\"></td><td><pre>          responseStrGETAsyn = response.body ().string ();</pre></td></tr><tr><td data-num=\"170\"></td><td><pre>          try &#123;</pre></td></tr><tr><td data-num=\"171\"></td><td><pre>              myDataCallBack.requestSuccess (responseStrGETAsyn);</pre></td></tr><tr><td data-num=\"172\"></td><td><pre></pre></td></tr><tr><td data-num=\"173\"></td><td><pre>          &#125; catch (Exception e) &#123;</pre></td></tr><tr><td data-num=\"174\"></td><td><pre>              e.printStackTrace ();</pre></td></tr><tr><td data-num=\"175\"></td><td><pre>              Logger.e (&amp;quot;GET å¼‚æ­¥è¯·æ±‚ä¸º String è§£æå¼‚å¸¸å¤±è´¥ & amp;quot; + e.toString ());</pre></td></tr><tr><td data-num=\"176\"></td><td><pre>          &#125;</pre></td></tr><tr><td data-num=\"177\"></td><td><pre></pre></td></tr><tr><td data-num=\"178\"></td><td><pre>      &#125;</pre></td></tr><tr><td data-num=\"179\"></td><td><pre>  &#125;);</pre></td></tr><tr><td data-num=\"180\"></td><td><pre></pre></td></tr><tr><td data-num=\"181\"></td><td><pre>  myDataCallBack.onAfter ();</pre></td></tr><tr><td data-num=\"182\"></td><td><pre>  &#125; catch (Exception e) &#123;</pre></td></tr><tr><td data-num=\"183\"></td><td><pre>  Logger.e (&amp;quot;GET å¼‚æ­¥è¯·æ±‚è§£æä¸º String å¼‚å¸¸ & amp;quot; + e.toString ());</pre></td></tr><tr><td data-num=\"184\"></td><td><pre>  e.printStackTrace ();</pre></td></tr><tr><td data-num=\"185\"></td><td><pre>  &#125;  return responseStrGETAsyn;&#125;</pre></td></tr><tr><td data-num=\"186\"></td><td><pre>/**</pre></td></tr><tr><td data-num=\"187\"></td><td><pre></pre></td></tr><tr><td data-num=\"188\"></td><td><pre>get å¼‚æ­¥è¯·æ±‚ä¼ å‚æ•° (å¯ä»¥ä¼  null)</pre></td></tr><tr><td data-num=\"189\"></td><td><pre></pre></td></tr><tr><td data-num=\"190\"></td><td><pre>é€šè¿‡ response.body ().string () è·å–è¿”å›çš„å­—ç¬¦ä¸²</pre></td></tr><tr><td data-num=\"191\"></td><td><pre></pre></td></tr><tr><td data-num=\"192\"></td><td><pre>å¼‚æ­¥è¿”å›å€¼ä¸èƒ½æ›´æ–° UIï¼Œè¦å¼€å¯æ–°çº¿ç¨‹</pre></td></tr><tr><td data-num=\"193\"></td><td><pre></pre></td></tr><tr><td data-num=\"194\"></td><td><pre></pre></td></tr><tr><td data-num=\"195\"></td><td><pre>@param url</pre></td></tr><tr><td data-num=\"196\"></td><td><pre></pre></td></tr><tr><td data-num=\"197\"></td><td><pre>@return</pre></td></tr><tr><td data-num=\"198\"></td><td><pre></pre></td></tr><tr><td data-num=\"199\"></td><td><pre>/public String getAsynBackStringWithParms (String url, Map&lt;String, String> params, final MyDataCallBack myDataCallBack) &#123;  if (params  null) &#123;</pre></td></tr><tr><td data-num=\"200\"></td><td><pre>  params = new HashMap&amp;lt;&amp;gt;();</pre></td></tr><tr><td data-num=\"201\"></td><td><pre>  &#125;  // è¯·æ±‚ urlï¼ˆbaseUrl + å‚æ•°ï¼‰  String doUrl = urlJoint (url, params);  final Request request = new Request.Builder ()</pre></td></tr><tr><td data-num=\"202\"></td><td><pre>      .url (doUrl)</pre></td></tr><tr><td data-num=\"203\"></td><td><pre>//                .header (\"Cookie\", \"è‡ªåŠ¨ç®¡ç†æ›´æ–°éœ€è¦æºå¸¦çš„ Cookie\")</pre></td></tr><tr><td data-num=\"204\"></td><td><pre>      .build ();</pre></td></tr><tr><td data-num=\"205\"></td><td><pre>  Call call = okHttpClient.newCall (request);  try &#123;</pre></td></tr><tr><td data-num=\"206\"></td><td><pre>  myDataCallBack.onBefore (request);</pre></td></tr><tr><td data-num=\"207\"></td><td><pre>  // è¯·æ±‚åŠ å…¥è°ƒåº¦</pre></td></tr><tr><td data-num=\"208\"></td><td><pre>  call.enqueue (new Callback () &#123;</pre></td></tr><tr><td data-num=\"209\"></td><td><pre></pre></td></tr><tr><td data-num=\"210\"></td><td><pre>      @Override</pre></td></tr><tr><td data-num=\"211\"></td><td><pre>      public void onFailure (Call call, IOException e) &#123;</pre></td></tr><tr><td data-num=\"212\"></td><td><pre>//                 Logger.e (\"GET å¼‚æ­¥è¯·æ±‚ä¸º String å¤±è´¥\"+e.toString ());</pre></td></tr><tr><td data-num=\"213\"></td><td><pre>          myDataCallBack.requestFailure (request, e);</pre></td></tr><tr><td data-num=\"214\"></td><td><pre>      &#125;</pre></td></tr><tr><td data-num=\"215\"></td><td><pre></pre></td></tr><tr><td data-num=\"216\"></td><td><pre>      @Override</pre></td></tr><tr><td data-num=\"217\"></td><td><pre>      public void onResponse (Call call, Response response) throws IOException &#123;</pre></td></tr><tr><td data-num=\"218\"></td><td><pre>          responseStrGETAsyn = response.body ().string ();</pre></td></tr><tr><td data-num=\"219\"></td><td><pre>          try &#123;</pre></td></tr><tr><td data-num=\"220\"></td><td><pre>              myDataCallBack.requestSuccess (responseStrGETAsyn);</pre></td></tr><tr><td data-num=\"221\"></td><td><pre></pre></td></tr><tr><td data-num=\"222\"></td><td><pre>          &#125; catch (Exception e) &#123;</pre></td></tr><tr><td data-num=\"223\"></td><td><pre>              e.printStackTrace ();</pre></td></tr><tr><td data-num=\"224\"></td><td><pre>              Logger.e (&amp;quot;GET å¼‚æ­¥è¯·æ±‚ä¸º String è§£æå¼‚å¸¸å¤±è´¥ & amp;quot; + e.toString ());</pre></td></tr><tr><td data-num=\"225\"></td><td><pre>          &#125;</pre></td></tr><tr><td data-num=\"226\"></td><td><pre></pre></td></tr><tr><td data-num=\"227\"></td><td><pre>      &#125;</pre></td></tr><tr><td data-num=\"228\"></td><td><pre>  &#125;);</pre></td></tr><tr><td data-num=\"229\"></td><td><pre></pre></td></tr><tr><td data-num=\"230\"></td><td><pre>  myDataCallBack.onAfter ();</pre></td></tr><tr><td data-num=\"231\"></td><td><pre>  &#125; catch (Exception e) &#123;</pre></td></tr><tr><td data-num=\"232\"></td><td><pre>  Logger.e (&amp;quot;GET å¼‚æ­¥è¯·æ±‚è§£æä¸º String å¼‚å¸¸ & amp;quot; + e.toString ());</pre></td></tr><tr><td data-num=\"233\"></td><td><pre>  e.printStackTrace ();</pre></td></tr><tr><td data-num=\"234\"></td><td><pre>  &#125;  return responseStrGETAsyn;&#125;</pre></td></tr><tr><td data-num=\"235\"></td><td><pre>/**</pre></td></tr><tr><td data-num=\"236\"></td><td><pre></pre></td></tr><tr><td data-num=\"237\"></td><td><pre>post å¼‚æ­¥è¯·æ±‚ map ä¼ å‚</pre></td></tr><tr><td data-num=\"238\"></td><td><pre></pre></td></tr><tr><td data-num=\"239\"></td><td><pre>é€šè¿‡ response.body ().string () è·å–è¿”å›çš„å­—ç¬¦ä¸²</pre></td></tr><tr><td data-num=\"240\"></td><td><pre></pre></td></tr><tr><td data-num=\"241\"></td><td><pre>å¼‚æ­¥è¿”å›å€¼ä¸èƒ½æ›´æ–° UIï¼Œè¦å¼€å¯æ–°çº¿ç¨‹</pre></td></tr><tr><td data-num=\"242\"></td><td><pre></pre></td></tr><tr><td data-num=\"243\"></td><td><pre></pre></td></tr><tr><td data-num=\"244\"></td><td><pre>@param url</pre></td></tr><tr><td data-num=\"245\"></td><td><pre></pre></td></tr><tr><td data-num=\"246\"></td><td><pre>@return</pre></td></tr><tr><td data-num=\"247\"></td><td><pre></pre></td></tr><tr><td data-num=\"248\"></td><td><pre>/public String postAsynBackString (String url, Map&lt;String, String> params, final MyDataCallBack myDataCallBack) &#123;  RequestBody requestBody;  if (params  null) &#123;</pre></td></tr><tr><td data-num=\"249\"></td><td><pre>  params = new HashMap&amp;lt;&amp;gt;();</pre></td></tr><tr><td data-num=\"250\"></td><td><pre>  &#125;</pre></td></tr><tr><td data-num=\"251\"></td><td><pre>  FormBody.Builder builder = new FormBody.Builder ();  /**</pre></td></tr><tr><td data-num=\"252\"></td><td><pre></pre></td></tr><tr><td data-num=\"253\"></td><td><pre>åœ¨è¿™å¯¹æ·»åŠ çš„å‚æ•°è¿›è¡Œéå†</pre></td></tr><tr><td data-num=\"254\"></td><td><pre></pre></td></tr><tr><td data-num=\"255\"></td><td><pre>/addMapParmsToFromBody (params, builder);</pre></td></tr><tr><td data-num=\"256\"></td><td><pre>requestBody = builder.build ();String realURL = urlJoint (url, null);// ç»“æœè¿”å› final Request request = new Request.Builder ()</pre></td></tr><tr><td data-num=\"257\"></td><td><pre>  .url (realURL)</pre></td></tr><tr><td data-num=\"258\"></td><td><pre>  .post (requestBody)</pre></td></tr><tr><td data-num=\"259\"></td><td><pre>  .build ();</pre></td></tr><tr><td data-num=\"260\"></td><td><pre>Call call = okHttpClient.newCall (request);try &#123;  myDataCallBack.onBefore (request);  // è¯·æ±‚åŠ å…¥è°ƒåº¦  call.enqueue (new Callback () &#123;</pre></td></tr><tr><td data-num=\"261\"></td><td><pre>  @Override</pre></td></tr><tr><td data-num=\"262\"></td><td><pre>  public void onFailure (Call call, IOException e) &#123;</pre></td></tr><tr><td data-num=\"263\"></td><td><pre>      myDataCallBack.requestFailure (request, e);</pre></td></tr><tr><td data-num=\"264\"></td><td><pre>  &#125;</pre></td></tr><tr><td data-num=\"265\"></td><td><pre></pre></td></tr><tr><td data-num=\"266\"></td><td><pre>  @Override</pre></td></tr><tr><td data-num=\"267\"></td><td><pre>  public void onResponse (Call call, Response response) throws IOException &#123;</pre></td></tr><tr><td data-num=\"268\"></td><td><pre>      responseStrGETAsyn = response.body ().string ();// æ­¤å¤„ä¹Ÿå¯ä»¥è§£æä¸º byte [],Reader,InputStream</pre></td></tr><tr><td data-num=\"269\"></td><td><pre>      try &#123;</pre></td></tr><tr><td data-num=\"270\"></td><td><pre>          myDataCallBack.requestSuccess (responseStrGETAsyn);</pre></td></tr><tr><td data-num=\"271\"></td><td><pre></pre></td></tr><tr><td data-num=\"272\"></td><td><pre>      &#125; catch (Exception e) &#123;</pre></td></tr><tr><td data-num=\"273\"></td><td><pre>          e.printStackTrace ();</pre></td></tr><tr><td data-num=\"274\"></td><td><pre>          Logger.e (&amp;quot;POST å¼‚æ­¥è¯·æ±‚ä¸º String è§£æå¼‚å¸¸å¤±è´¥ & amp;quot; + e.toString ());</pre></td></tr><tr><td data-num=\"275\"></td><td><pre>      &#125;</pre></td></tr><tr><td data-num=\"276\"></td><td><pre></pre></td></tr><tr><td data-num=\"277\"></td><td><pre>  &#125;</pre></td></tr><tr><td data-num=\"278\"></td><td><pre>  &#125;);</pre></td></tr><tr><td data-num=\"279\"></td><td><pre>  myDataCallBack.onAfter ();&#125; catch (Exception e) &#123;  Logger.e (\"POST å¼‚æ­¥è¯·æ±‚è§£æä¸º String å¼‚å¸¸\" + e.toString ());  e.printStackTrace ();&#125; return responseStrGETAsyn;&#125;</pre></td></tr><tr><td data-num=\"280\"></td><td><pre></pre></td></tr><tr><td data-num=\"281\"></td><td><pre></pre></td></tr><tr><td data-num=\"282\"></td><td><pre>private void addMapParmsToFromBody (Map&lt;String, String> params, FormBody.Builder builder) &#123;  for (Map.Entry&lt;String, String> map : params.entrySet ()) &#123;</pre></td></tr><tr><td data-num=\"283\"></td><td><pre>  String key = map.getKey ();</pre></td></tr><tr><td data-num=\"284\"></td><td><pre>  String value;</pre></td></tr><tr><td data-num=\"285\"></td><td><pre>  /**</pre></td></tr><tr><td data-num=\"286\"></td><td><pre>   * åˆ¤æ–­å€¼æ˜¯å¦æ˜¯ç©ºçš„</pre></td></tr><tr><td data-num=\"287\"></td><td><pre>   */</span></pre></td></tr><tr><td data-num=\"288\"></td><td><pre>  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"289\"></td><td><pre>      value <span class=\"token operator\">=</span> <span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span><span class=\"token operator\">&amp;</span>quot<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"290\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"291\"></td><td><pre>      value <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"292\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"293\"></td><td><pre>  <span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"294\"></td><td><pre>   * æŠŠ key å’Œ value æ·»åŠ åˆ° formbody ä¸­</pre></td></tr><tr><td data-num=\"295\"></td><td><pre>   */</span></pre></td></tr><tr><td data-num=\"296\"></td><td><pre>  builder<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"297\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"298\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"299\"></td><td><pre></pre></td></tr><tr><td data-num=\"300\"></td><td><pre>post å¼‚æ­¥è¯·æ±‚ json ä¼ å‚</pre></td></tr><tr><td data-num=\"301\"></td><td><pre></pre></td></tr><tr><td data-num=\"302\"></td><td><pre>é€šè¿‡ response.body ().string () è·å–è¿”å›çš„å­—ç¬¦ä¸²</pre></td></tr><tr><td data-num=\"303\"></td><td><pre></pre></td></tr><tr><td data-num=\"304\"></td><td><pre>å¼‚æ­¥è¿”å›å€¼ä¸èƒ½æ›´æ–° UIï¼Œè¦å¼€å¯æ–°çº¿ç¨‹</pre></td></tr><tr><td data-num=\"305\"></td><td><pre></pre></td></tr><tr><td data-num=\"306\"></td><td><pre></pre></td></tr><tr><td data-num=\"307\"></td><td><pre>@param url</pre></td></tr><tr><td data-num=\"308\"></td><td><pre></pre></td></tr><tr><td data-num=\"309\"></td><td><pre>@return</pre></td></tr><tr><td data-num=\"310\"></td><td><pre></pre></td></tr><tr><td data-num=\"311\"></td><td><pre>/public String postAsynRequireJson (String url, Map&lt;String, String> params, final MyDataCallBack myDataCallBack) &#123;</pre></td></tr><tr><td data-num=\"312\"></td><td><pre>  if (params  null) &#123;</pre></td></tr><tr><td data-num=\"313\"></td><td><pre>  params = new HashMap&amp;lt;&amp;gt;();</pre></td></tr><tr><td data-num=\"314\"></td><td><pre>  &#125;  // å°† map è½¬æ¢æˆ json, éœ€è¦å¼•å…¥ Gson åŒ…  String mapToJson = new Gson ().toJson (params);  final String realURL = urlJoint (url, null);  final Request request = buildJsonPostRequest (realURL, mapToJson);  Call call = okHttpClient.newCall (request);  try &#123;</pre></td></tr><tr><td data-num=\"315\"></td><td><pre>  myDataCallBack.onBefore (request);</pre></td></tr><tr><td data-num=\"316\"></td><td><pre>  // è¯·æ±‚åŠ å…¥è°ƒåº¦</pre></td></tr><tr><td data-num=\"317\"></td><td><pre>  call.enqueue (new Callback () &#123;</pre></td></tr><tr><td data-num=\"318\"></td><td><pre></pre></td></tr><tr><td data-num=\"319\"></td><td><pre>      @Override</pre></td></tr><tr><td data-num=\"320\"></td><td><pre>      public void onFailure (Call call, IOException e) &#123;</pre></td></tr><tr><td data-num=\"321\"></td><td><pre>          myDataCallBack.requestFailure (request, e);</pre></td></tr><tr><td data-num=\"322\"></td><td><pre>      &#125;</pre></td></tr><tr><td data-num=\"323\"></td><td><pre></pre></td></tr><tr><td data-num=\"324\"></td><td><pre>      @Override</pre></td></tr><tr><td data-num=\"325\"></td><td><pre>      public void onResponse (Call call, Response response) throws IOException &#123;</pre></td></tr><tr><td data-num=\"326\"></td><td><pre>          responseStrGETAsyn = response.body ().string ();// æ­¤å¤„ä¹Ÿå¯ä»¥è§£æä¸º byte [],Reader,InputStream</pre></td></tr><tr><td data-num=\"327\"></td><td><pre>          try &#123;</pre></td></tr><tr><td data-num=\"328\"></td><td><pre>              myDataCallBack.requestSuccess (responseStrGETAsyn);</pre></td></tr><tr><td data-num=\"329\"></td><td><pre></pre></td></tr><tr><td data-num=\"330\"></td><td><pre>          &#125; catch (Exception e) &#123;</pre></td></tr><tr><td data-num=\"331\"></td><td><pre>              e.printStackTrace ();</pre></td></tr><tr><td data-num=\"332\"></td><td><pre>              Logger.e (&amp;quot;POST å¼‚æ­¥è¯·æ±‚ä¸º String è§£æå¼‚å¸¸å¤±è´¥ & amp;quot; + e.toString ());</pre></td></tr><tr><td data-num=\"333\"></td><td><pre>          &#125;</pre></td></tr><tr><td data-num=\"334\"></td><td><pre></pre></td></tr><tr><td data-num=\"335\"></td><td><pre>      &#125;</pre></td></tr><tr><td data-num=\"336\"></td><td><pre>  &#125;);</pre></td></tr><tr><td data-num=\"337\"></td><td><pre></pre></td></tr><tr><td data-num=\"338\"></td><td><pre>  myDataCallBack.onAfter ();</pre></td></tr><tr><td data-num=\"339\"></td><td><pre>  &#125; catch (Exception e) &#123;</pre></td></tr><tr><td data-num=\"340\"></td><td><pre>  Logger.e (&amp;quot;POST å¼‚æ­¥è¯·æ±‚è§£æä¸º String å¼‚å¸¸ & amp;quot; + e.toString ());</pre></td></tr><tr><td data-num=\"341\"></td><td><pre>  e.printStackTrace ();</pre></td></tr><tr><td data-num=\"342\"></td><td><pre>  &#125;  return responseStrGETAsyn;&#125;</pre></td></tr><tr><td data-num=\"343\"></td><td><pre>/**</pre></td></tr><tr><td data-num=\"344\"></td><td><pre></pre></td></tr><tr><td data-num=\"345\"></td><td><pre>Json_POST è¯·æ±‚å‚æ•°</pre></td></tr><tr><td data-num=\"346\"></td><td><pre></pre></td></tr><tr><td data-num=\"347\"></td><td><pre></pre></td></tr><tr><td data-num=\"348\"></td><td><pre>@param url  url</pre></td></tr><tr><td data-num=\"349\"></td><td><pre></pre></td></tr><tr><td data-num=\"350\"></td><td><pre>@param json json</pre></td></tr><tr><td data-num=\"351\"></td><td><pre></pre></td></tr><tr><td data-num=\"352\"></td><td><pre>@return requestBody</pre></td></tr><tr><td data-num=\"353\"></td><td><pre></pre></td></tr><tr><td data-num=\"354\"></td><td><pre>/private Request buildJsonPostRequest (String url, String json) &#123;//        RequestBody requestBody = RequestBody.create (MediaType.parse (\"application/json; charset=utf-8\"), json);  RequestBody requestBody = RequestBody.create (JSON, json);  return new Request.Builder ().url (url).post (requestBody).build ();&#125;</pre></td></tr><tr><td data-num=\"355\"></td><td><pre>/**</pre></td></tr><tr><td data-num=\"356\"></td><td><pre></pre></td></tr><tr><td data-num=\"357\"></td><td><pre>String_POST è¯·æ±‚å‚æ•°</pre></td></tr><tr><td data-num=\"358\"></td><td><pre></pre></td></tr><tr><td data-num=\"359\"></td><td><pre></pre></td></tr><tr><td data-num=\"360\"></td><td><pre>@param url  url</pre></td></tr><tr><td data-num=\"361\"></td><td><pre></pre></td></tr><tr><td data-num=\"362\"></td><td><pre>@param json json</pre></td></tr><tr><td data-num=\"363\"></td><td><pre></pre></td></tr><tr><td data-num=\"364\"></td><td><pre>@return requestBody</pre></td></tr><tr><td data-num=\"365\"></td><td><pre></pre></td></tr><tr><td data-num=\"366\"></td><td><pre>/private Request buildStringPostRequest (String url, String json) &#123;  RequestBody requestBody = RequestBody.create (MEDIA_TYPE_MARKDOWN, json);  return new Request.Builder ().url (url).post (requestBody).build ();&#125;</pre></td></tr><tr><td data-num=\"367\"></td><td><pre>/**</pre></td></tr><tr><td data-num=\"368\"></td><td><pre></pre></td></tr><tr><td data-num=\"369\"></td><td><pre>@param url    å®é™… URL çš„ path</pre></td></tr><tr><td data-num=\"370\"></td><td><pre></pre></td></tr><tr><td data-num=\"371\"></td><td><pre>@param params</pre></td></tr><tr><td data-num=\"372\"></td><td><pre></pre></td></tr><tr><td data-num=\"373\"></td><td><pre>@return</pre></td></tr><tr><td data-num=\"374\"></td><td><pre></pre></td></tr><tr><td data-num=\"375\"></td><td><pre>/private static String urlJoint (String url, Map&lt;String, String> params) &#123;  StringBuilder realURL = new StringBuilder (Constant.URL);  realURL = realURL.append (url);  boolean isFirst = true;  if (params  null) &#123;</pre></td></tr><tr><td data-num=\"376\"></td><td><pre>  params = new HashMap&amp;lt;&amp;gt;();</pre></td></tr><tr><td data-num=\"377\"></td><td><pre>  &#125; else &#123;</pre></td></tr><tr><td data-num=\"378\"></td><td><pre>  Set&amp;lt;Map.Entry&amp;lt;String, String&amp;gt;&amp;gt; entrySet = params.entrySet ();</pre></td></tr><tr><td data-num=\"379\"></td><td><pre>  for (Map.Entry&amp;lt;String, String&amp;gt; entry : entrySet) &#123;</pre></td></tr><tr><td data-num=\"380\"></td><td><pre>      if (isFirst &amp;amp;&amp;amp; !url.contains (&amp;quot;?&amp;quot;)) &#123;</pre></td></tr><tr><td data-num=\"381\"></td><td><pre>          isFirst = false;</pre></td></tr><tr><td data-num=\"382\"></td><td><pre>          realURL.append (&amp;quot;?&amp;quot;);</pre></td></tr><tr><td data-num=\"383\"></td><td><pre>      &#125; else &#123;</pre></td></tr><tr><td data-num=\"384\"></td><td><pre>          realURL.append (&amp;quot;&amp;amp;&amp;quot;);</pre></td></tr><tr><td data-num=\"385\"></td><td><pre>      &#125;</pre></td></tr><tr><td data-num=\"386\"></td><td><pre>      realURL.append (entry.getKey ());</pre></td></tr><tr><td data-num=\"387\"></td><td><pre>      realURL.append (&amp;quot;=&amp;quot;);</pre></td></tr><tr><td data-num=\"388\"></td><td><pre>      if (entry.getValue ()  null) &#123;</pre></td></tr><tr><td data-num=\"389\"></td><td><pre>          realURL.append (&amp;quot; &amp;quot;);</pre></td></tr><tr><td data-num=\"390\"></td><td><pre>      &#125; else &#123;</pre></td></tr><tr><td data-num=\"391\"></td><td><pre>          realURL.append (entry.getValue ());</pre></td></tr><tr><td data-num=\"392\"></td><td><pre>      &#125;</pre></td></tr><tr><td data-num=\"393\"></td><td><pre></pre></td></tr><tr><td data-num=\"394\"></td><td><pre>  &#125;</pre></td></tr><tr><td data-num=\"395\"></td><td><pre>  &#125;</pre></td></tr><tr><td data-num=\"396\"></td><td><pre>  return realURL.toString ();&#125;</pre></td></tr><tr><td data-num=\"397\"></td><td><pre>/**</pre></td></tr><tr><td data-num=\"398\"></td><td><pre></pre></td></tr><tr><td data-num=\"399\"></td><td><pre>åŸºäº http çš„æ–‡ä»¶ä¸Šä¼ ï¼ˆä¼ å…¥æ–‡ä»¶åå’Œ keyï¼‰</pre></td></tr><tr><td data-num=\"400\"></td><td><pre></pre></td></tr><tr><td data-num=\"401\"></td><td><pre>é€šè¿‡ addFormDataPart</pre></td></tr><tr><td data-num=\"402\"></td><td><pre></pre></td></tr><tr><td data-num=\"403\"></td><td><pre></pre></td></tr><tr><td data-num=\"404\"></td><td><pre>@param url            URL çš„ Path éƒ¨åˆ†</pre></td></tr><tr><td data-num=\"405\"></td><td><pre></pre></td></tr><tr><td data-num=\"406\"></td><td><pre>@param myDataCallBack è‡ªå®šä¹‰å›è°ƒæ¥å£</pre></td></tr><tr><td data-num=\"407\"></td><td><pre></pre></td></tr><tr><td data-num=\"408\"></td><td><pre>å°† file ä½œä¸ºè¯·æ±‚ä½“ä¼ å…¥åˆ°æœåŠ¡ç«¯.</pre></td></tr><tr><td data-num=\"409\"></td><td><pre></pre></td></tr><tr><td data-num=\"410\"></td><td><pre>@param fileKey        æ–‡ä»¶ä¼ å…¥æœåŠ¡å™¨çš„é”® \"image\"</pre></td></tr><tr><td data-num=\"411\"></td><td><pre></pre></td></tr><tr><td data-num=\"412\"></td><td><pre>@fileName: \"pic.png\"</pre></td></tr><tr><td data-num=\"413\"></td><td><pre></pre></td></tr><tr><td data-num=\"414\"></td><td><pre>/private void upLoadMultiFileSimple (String url, String fileName, String fileKey, final MyDataCallBack myDataCallBack) &#123;  File file = new File (Environment.getExternalStorageDirectory (), fileName);  RequestBody fileBody = RequestBody.create (MediaType.parse (\"application/octet-stream\"), file);  RequestBody requestBody = new MultipartBody.Builder ()</pre></td></tr><tr><td data-num=\"415\"></td><td><pre>      .setType (MultipartBody.FORM)</pre></td></tr><tr><td data-num=\"416\"></td><td><pre>      .addFormDataPart (fileKey, fileName, fileBody)</pre></td></tr><tr><td data-num=\"417\"></td><td><pre>      .build ();</pre></td></tr><tr><td data-num=\"418\"></td><td><pre>  final String realURL = urlJoint (url, null);  final Request request = new Request.Builder ()</pre></td></tr><tr><td data-num=\"419\"></td><td><pre>      .url (realURL)</pre></td></tr><tr><td data-num=\"420\"></td><td><pre>      .post (requestBody)</pre></td></tr><tr><td data-num=\"421\"></td><td><pre>      .build ();</pre></td></tr><tr><td data-num=\"422\"></td><td><pre>  Call call = okHttpClient.newCall (request);  try &#123;</pre></td></tr><tr><td data-num=\"423\"></td><td><pre>  myDataCallBack.onBefore (request);</pre></td></tr><tr><td data-num=\"424\"></td><td><pre>  // è¯·æ±‚åŠ å…¥è°ƒåº¦</pre></td></tr><tr><td data-num=\"425\"></td><td><pre>  call.enqueue (new Callback () &#123;</pre></td></tr><tr><td data-num=\"426\"></td><td><pre></pre></td></tr><tr><td data-num=\"427\"></td><td><pre>      @Override</pre></td></tr><tr><td data-num=\"428\"></td><td><pre>      public void onFailure (Call call, IOException e) &#123;</pre></td></tr><tr><td data-num=\"429\"></td><td><pre>          myDataCallBack.requestFailure (request, e);</pre></td></tr><tr><td data-num=\"430\"></td><td><pre>      &#125;</pre></td></tr><tr><td data-num=\"431\"></td><td><pre></pre></td></tr><tr><td data-num=\"432\"></td><td><pre>      @Override</pre></td></tr><tr><td data-num=\"433\"></td><td><pre>      public void onResponse (Call call, Response response) throws IOException &#123;</pre></td></tr><tr><td data-num=\"434\"></td><td><pre>          try &#123;</pre></td></tr><tr><td data-num=\"435\"></td><td><pre>              myDataCallBack.requestSuccess (responseStrGETAsyn);</pre></td></tr><tr><td data-num=\"436\"></td><td><pre></pre></td></tr><tr><td data-num=\"437\"></td><td><pre>          &#125; catch (Exception e) &#123;</pre></td></tr><tr><td data-num=\"438\"></td><td><pre>              e.printStackTrace ();</pre></td></tr><tr><td data-num=\"439\"></td><td><pre>              Logger.e (&amp;quot;POST å¼‚æ­¥æ–‡ä»¶ä¸Šä¼ å¤±è´¥ & amp;quot; + e.toString ());</pre></td></tr><tr><td data-num=\"440\"></td><td><pre>          &#125;</pre></td></tr><tr><td data-num=\"441\"></td><td><pre></pre></td></tr><tr><td data-num=\"442\"></td><td><pre>      &#125;</pre></td></tr><tr><td data-num=\"443\"></td><td><pre>  &#125;);</pre></td></tr><tr><td data-num=\"444\"></td><td><pre></pre></td></tr><tr><td data-num=\"445\"></td><td><pre>  myDataCallBack.onAfter ();</pre></td></tr><tr><td data-num=\"446\"></td><td><pre>  &#125; catch (Exception e) &#123;</pre></td></tr><tr><td data-num=\"447\"></td><td><pre>  Logger.e (&amp;quot;POST å¼‚æ­¥æ–‡ä»¶ä¸Šä¼ å¼‚å¸¸ & amp;quot; + e.toString ());</pre></td></tr><tr><td data-num=\"448\"></td><td><pre>  e.printStackTrace ();</pre></td></tr><tr><td data-num=\"449\"></td><td><pre>  &#125;&#125;</pre></td></tr><tr><td data-num=\"450\"></td><td><pre>/**</pre></td></tr><tr><td data-num=\"451\"></td><td><pre></pre></td></tr><tr><td data-num=\"452\"></td><td><pre>åŸºäº http çš„æ–‡ä»¶ä¸Šä¼ ï¼ˆä¼ å…¥æ–‡ä»¶æ•°ç»„å’Œ keyï¼‰æ··åˆå‚æ•°å’Œæ–‡ä»¶è¯·æ±‚</pre></td></tr><tr><td data-num=\"453\"></td><td><pre></pre></td></tr><tr><td data-num=\"454\"></td><td><pre>é€šè¿‡ addFormDataPart å¯ä»¥æ·»åŠ å¤šä¸ªä¸Šä¼ çš„æ–‡ä»¶</pre></td></tr><tr><td data-num=\"455\"></td><td><pre></pre></td></tr><tr><td data-num=\"456\"></td><td><pre></pre></td></tr><tr><td data-num=\"457\"></td><td><pre>@param url            URL çš„ Path éƒ¨åˆ†</pre></td></tr><tr><td data-num=\"458\"></td><td><pre></pre></td></tr><tr><td data-num=\"459\"></td><td><pre>@param myDataCallBack è‡ªå®šä¹‰å›è°ƒæ¥å£</pre></td></tr><tr><td data-num=\"460\"></td><td><pre></pre></td></tr><tr><td data-num=\"461\"></td><td><pre>å°† file ä½œä¸ºè¯·æ±‚ä½“ä¼ å…¥åˆ°æœåŠ¡ç«¯.</pre></td></tr><tr><td data-num=\"462\"></td><td><pre></pre></td></tr><tr><td data-num=\"463\"></td><td><pre>@param files          ä¸Šä¼ çš„æ–‡ä»¶</pre></td></tr><tr><td data-num=\"464\"></td><td><pre></pre></td></tr><tr><td data-num=\"465\"></td><td><pre>@param fileKeys       ä¸Šä¼ çš„æ–‡ä»¶ key é›†åˆ</pre></td></tr><tr><td data-num=\"466\"></td><td><pre></pre></td></tr><tr><td data-num=\"467\"></td><td><pre>/private void upLoadMultiFile (String url, File [] files, String [] fileKeys, Map&lt;String, String> params, final MyDataCallBack myDataCallBack) &#123;  if (params  null) &#123;</pre></td></tr><tr><td data-num=\"468\"></td><td><pre>  params = new HashMap&amp;lt;&amp;gt;();</pre></td></tr><tr><td data-num=\"469\"></td><td><pre>  &#125;  final String realURL = urlJoint (url, null);  FormBody.Builder builder = new FormBody.Builder ();  addMapParmsToFromBody (params, builder);  RequestBody requestBody = builder.build ();  MultipartBody.Builder multipartBody = new MultipartBody.Builder ();  multipartBody.setType (MultipartBody.ALTERNATIVE)</pre></td></tr><tr><td data-num=\"470\"></td><td><pre>      .addPart (requestBody);</pre></td></tr><tr><td data-num=\"471\"></td><td><pre>  if (files != null) &#123;</pre></td></tr><tr><td data-num=\"472\"></td><td><pre>  RequestBody fileBody = null;</pre></td></tr><tr><td data-num=\"473\"></td><td><pre>  for (int i = 0; i &amp;lt; files.length; i++) &#123;</pre></td></tr><tr><td data-num=\"474\"></td><td><pre>      File file = files [i];</pre></td></tr><tr><td data-num=\"475\"></td><td><pre>      String fileName = file.getName ();</pre></td></tr><tr><td data-num=\"476\"></td><td><pre>      fileBody = RequestBody.create (MediaType.parse (guessMimeType (fileName)), file);</pre></td></tr><tr><td data-num=\"477\"></td><td><pre>      //TODO æ ¹æ®æ–‡ä»¶åè®¾ç½® contentType</pre></td></tr><tr><td data-num=\"478\"></td><td><pre>      multipartBody.addPart (Headers.of (&amp;quot;Content-Disposition&amp;quot;,</pre></td></tr><tr><td data-num=\"479\"></td><td><pre>              &amp;quot;form-data; name=\\&amp;quot;&amp;quot; + fileKeys [i] + &amp;quot;\\&amp;quot;; filename=\\&amp;quot;&amp;quot; + fileName + &amp;quot;\\&amp;quot;&amp;quot;),</pre></td></tr><tr><td data-num=\"480\"></td><td><pre>              fileBody);</pre></td></tr><tr><td data-num=\"481\"></td><td><pre>  &#125;</pre></td></tr><tr><td data-num=\"482\"></td><td><pre>  &#125;</pre></td></tr><tr><td data-num=\"483\"></td><td><pre>  final Request request = new Request.Builder ()</pre></td></tr><tr><td data-num=\"484\"></td><td><pre>      .url (realURL)</pre></td></tr><tr><td data-num=\"485\"></td><td><pre>      .post (multipartBody.build ())</pre></td></tr><tr><td data-num=\"486\"></td><td><pre>      .build ();</pre></td></tr><tr><td data-num=\"487\"></td><td><pre>  Call call = okHttpClient.newCall (request);  try &#123;</pre></td></tr><tr><td data-num=\"488\"></td><td><pre>  myDataCallBack.onBefore (request);</pre></td></tr><tr><td data-num=\"489\"></td><td><pre>  // è¯·æ±‚åŠ å…¥è°ƒåº¦</pre></td></tr><tr><td data-num=\"490\"></td><td><pre>  call.enqueue (new Callback () &#123;</pre></td></tr><tr><td data-num=\"491\"></td><td><pre></pre></td></tr><tr><td data-num=\"492\"></td><td><pre>      @Override</pre></td></tr><tr><td data-num=\"493\"></td><td><pre>      public void onFailure (Call call, IOException e) &#123;</pre></td></tr><tr><td data-num=\"494\"></td><td><pre>          myDataCallBack.requestFailure (call.request (), e);</pre></td></tr><tr><td data-num=\"495\"></td><td><pre>      &#125;</pre></td></tr><tr><td data-num=\"496\"></td><td><pre></pre></td></tr><tr><td data-num=\"497\"></td><td><pre>      @Override</pre></td></tr><tr><td data-num=\"498\"></td><td><pre>      public void onResponse (Call call, Response response)  &#123;</pre></td></tr><tr><td data-num=\"499\"></td><td><pre>          try &#123;</pre></td></tr><tr><td data-num=\"500\"></td><td><pre>              myDataCallBack.requestSuccess (response.body ().string ());</pre></td></tr><tr><td data-num=\"501\"></td><td><pre></pre></td></tr><tr><td data-num=\"502\"></td><td><pre>          &#125; catch (Exception e) &#123;</pre></td></tr><tr><td data-num=\"503\"></td><td><pre>              e.printStackTrace ();</pre></td></tr><tr><td data-num=\"504\"></td><td><pre>              Logger.e (&amp;quot;POST å¼‚æ­¥æ–‡ä»¶ä¸Šä¼ å¤±è´¥ & amp;quot; + e.toString ());</pre></td></tr><tr><td data-num=\"505\"></td><td><pre>          &#125;</pre></td></tr><tr><td data-num=\"506\"></td><td><pre></pre></td></tr><tr><td data-num=\"507\"></td><td><pre>      &#125;</pre></td></tr><tr><td data-num=\"508\"></td><td><pre>  &#125;);</pre></td></tr><tr><td data-num=\"509\"></td><td><pre></pre></td></tr><tr><td data-num=\"510\"></td><td><pre>  myDataCallBack.onAfter ();</pre></td></tr><tr><td data-num=\"511\"></td><td><pre>  &#125; catch (Exception e) &#123;</pre></td></tr><tr><td data-num=\"512\"></td><td><pre>  Logger.e (&amp;quot;POST å¼‚æ­¥æ–‡ä»¶ä¸Šä¼ å¼‚å¸¸ & amp;quot; + e.toString ());</pre></td></tr><tr><td data-num=\"513\"></td><td><pre>  e.printStackTrace ();</pre></td></tr><tr><td data-num=\"514\"></td><td><pre>  &#125;&#125;</pre></td></tr><tr><td data-num=\"515\"></td><td><pre>private String guessMimeType (String fileName) &#123;  FileNameMap fileNameMap = URLConnection.getFileNameMap ();  String contentTypeFor = fileNameMap.getContentTypeFor (fileName);  if (contentTypeFor == null) &#123;</pre></td></tr><tr><td data-num=\"516\"></td><td><pre>  contentTypeFor = &amp;quot;application/octet-stream&amp;quot;;</pre></td></tr><tr><td data-num=\"517\"></td><td><pre>  &#125;  return contentTypeFor;</pre></td></tr><tr><td data-num=\"518\"></td><td><pre>&#125;</pre></td></tr><tr><td data-num=\"519\"></td><td><pre>/**</pre></td></tr><tr><td data-num=\"520\"></td><td><pre></pre></td></tr><tr><td data-num=\"521\"></td><td><pre>æ–‡ä»¶ä¸‹è½½</pre></td></tr><tr><td data-num=\"522\"></td><td><pre></pre></td></tr><tr><td data-num=\"523\"></td><td><pre>@param url path è·¯å¾„</pre></td></tr><tr><td data-num=\"524\"></td><td><pre></pre></td></tr><tr><td data-num=\"525\"></td><td><pre>@param destFileDir æœ¬åœ°å­˜å‚¨çš„æ–‡ä»¶å¤¹è·¯å¾„</pre></td></tr><tr><td data-num=\"526\"></td><td><pre></pre></td></tr><tr><td data-num=\"527\"></td><td><pre>@param myDataCallBack è‡ªå®šä¹‰å›è°ƒæ¥å£</pre></td></tr><tr><td data-num=\"528\"></td><td><pre></pre></td></tr><tr><td data-num=\"529\"></td><td><pre>/private void downLoadFileAsyn (final String url, final String destFileDir, final MyDataCallBack myDataCallBack)&#123;  String realURL=urlJoint (url,null);  Request request=new Request.Builder ()</pre></td></tr><tr><td data-num=\"530\"></td><td><pre>      .url (realURL)</pre></td></tr><tr><td data-num=\"531\"></td><td><pre>      .build ();</pre></td></tr><tr><td data-num=\"532\"></td><td><pre>  Call call=okHttpClient.newCall (request);  call.enqueue (new Callback () &#123;</pre></td></tr><tr><td data-num=\"533\"></td><td><pre>  @Override</pre></td></tr><tr><td data-num=\"534\"></td><td><pre>  public void onFailure (Call call, IOException e) &#123;</pre></td></tr><tr><td data-num=\"535\"></td><td><pre>      myDataCallBack.requestFailure (call.request (),e);</pre></td></tr><tr><td data-num=\"536\"></td><td><pre></pre></td></tr><tr><td data-num=\"537\"></td><td><pre>  &#125;</pre></td></tr><tr><td data-num=\"538\"></td><td><pre></pre></td></tr><tr><td data-num=\"539\"></td><td><pre>  @Override</pre></td></tr><tr><td data-num=\"540\"></td><td><pre>  public void onResponse (Call call, Response response) &#123;</pre></td></tr><tr><td data-num=\"541\"></td><td><pre>      InputStream is = null;</pre></td></tr><tr><td data-num=\"542\"></td><td><pre>      byte [] buf = new byte [2048];</pre></td></tr><tr><td data-num=\"543\"></td><td><pre>      int len = 0;</pre></td></tr><tr><td data-num=\"544\"></td><td><pre>      FileOutputStream fos = null;</pre></td></tr><tr><td data-num=\"545\"></td><td><pre>      is = response.body ().byteStream ();</pre></td></tr><tr><td data-num=\"546\"></td><td><pre>      File file = new File (destFileDir, getFileName (url));</pre></td></tr><tr><td data-num=\"547\"></td><td><pre>      try &#123;</pre></td></tr><tr><td data-num=\"548\"></td><td><pre>          fos = new FileOutputStream (file);</pre></td></tr><tr><td data-num=\"549\"></td><td><pre>          while ((len = is.read (buf)) != -1)</pre></td></tr><tr><td data-num=\"550\"></td><td><pre>          &#123;</pre></td></tr><tr><td data-num=\"551\"></td><td><pre>              fos.write (buf, 0, len);</pre></td></tr><tr><td data-num=\"552\"></td><td><pre>          &#125;</pre></td></tr><tr><td data-num=\"553\"></td><td><pre>          fos.flush ();</pre></td></tr><tr><td data-num=\"554\"></td><td><pre>      &#125; catch (IOException e) &#123;</pre></td></tr><tr><td data-num=\"555\"></td><td><pre>          Logger.e (&amp;quot; æ–‡ä»¶ä¸‹è½½å¼‚å¸¸ï¼š&amp;quot;,e.getMessage ());</pre></td></tr><tr><td data-num=\"556\"></td><td><pre>          e.printStackTrace ();</pre></td></tr><tr><td data-num=\"557\"></td><td><pre>      &#125; finally &#123;</pre></td></tr><tr><td data-num=\"558\"></td><td><pre>          if (is != null) &#123;</pre></td></tr><tr><td data-num=\"559\"></td><td><pre>              try &#123;</pre></td></tr><tr><td data-num=\"560\"></td><td><pre>                  is.close ();</pre></td></tr><tr><td data-num=\"561\"></td><td><pre>              &#125; catch (IOException e) &#123;</pre></td></tr><tr><td data-num=\"562\"></td><td><pre>                  Logger.e (&amp;quot; æ–‡ä»¶æµå…³é—­å¼‚å¸¸ï¼š&amp;quot;,e.getMessage ());</pre></td></tr><tr><td data-num=\"563\"></td><td><pre>                  e.printStackTrace ();</pre></td></tr><tr><td data-num=\"564\"></td><td><pre>              &#125;</pre></td></tr><tr><td data-num=\"565\"></td><td><pre>          &#125;</pre></td></tr><tr><td data-num=\"566\"></td><td><pre>          if (fos != null) &#123;</pre></td></tr><tr><td data-num=\"567\"></td><td><pre>              try &#123;</pre></td></tr><tr><td data-num=\"568\"></td><td><pre>                  fos.close ();</pre></td></tr><tr><td data-num=\"569\"></td><td><pre>              &#125; catch (IOException e) &#123;</pre></td></tr><tr><td data-num=\"570\"></td><td><pre>                  Logger.e (&amp;quot; æ–‡ä»¶æµå…³é—­å¼‚å¸¸ï¼š&amp;quot;,e.getMessage ());</pre></td></tr><tr><td data-num=\"571\"></td><td><pre>                  e.printStackTrace ();</pre></td></tr><tr><td data-num=\"572\"></td><td><pre>              &#125;</pre></td></tr><tr><td data-num=\"573\"></td><td><pre>          &#125;</pre></td></tr><tr><td data-num=\"574\"></td><td><pre></pre></td></tr><tr><td data-num=\"575\"></td><td><pre>      &#125;</pre></td></tr><tr><td data-num=\"576\"></td><td><pre></pre></td></tr><tr><td data-num=\"577\"></td><td><pre>      // å¦‚æœä¸‹è½½æ–‡ä»¶æˆåŠŸï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ–‡ä»¶çš„ç»å¯¹è·¯å¾„</pre></td></tr><tr><td data-num=\"578\"></td><td><pre>      sendSuccessResultCallback (file.getAbsolutePath (), myDataCallBack);</pre></td></tr><tr><td data-num=\"579\"></td><td><pre></pre></td></tr><tr><td data-num=\"580\"></td><td><pre>      myDataCallBack.requestSuccess (response.body ().toString ());</pre></td></tr><tr><td data-num=\"581\"></td><td><pre></pre></td></tr><tr><td data-num=\"582\"></td><td><pre>  &#125;</pre></td></tr><tr><td data-num=\"583\"></td><td><pre>  &#125;);&#125;</pre></td></tr><tr><td data-num=\"584\"></td><td><pre>private String getFileName (String url) &#123;  int separatorIndex = url.lastIndexOf (\"/\");  return (separatorIndex &lt; 0) ? url : url.substring (separatorIndex + 1, url.length ());</pre></td></tr><tr><td data-num=\"585\"></td><td><pre>&#125;</pre></td></tr><tr><td data-num=\"586\"></td><td><pre>private void sendSuccessResultCallback (final String absolutePath, final MyDataCallBack myDataCallBack) &#123;  ThreadPoolUtil.execute (new Runnable () &#123;</pre></td></tr><tr><td data-num=\"587\"></td><td><pre>  @Override</pre></td></tr><tr><td data-num=\"588\"></td><td><pre>  public void run () &#123;</pre></td></tr><tr><td data-num=\"589\"></td><td><pre>      if (myDataCallBack!=null)&#123;</pre></td></tr><tr><td data-num=\"590\"></td><td><pre>          myDataCallBack.requestSuccess (absolutePath);</pre></td></tr><tr><td data-num=\"591\"></td><td><pre>      &#125;</pre></td></tr><tr><td data-num=\"592\"></td><td><pre>  &#125;</pre></td></tr><tr><td data-num=\"593\"></td><td><pre>  &#125;);&#125;</pre></td></tr><tr><td data-num=\"594\"></td><td><pre></pre></td></tr><tr><td data-num=\"595\"></td><td><pre></pre></td></tr><tr><td data-num=\"596\"></td><td><pre></pre></td></tr><tr><td data-num=\"597\"></td><td><pre></pre></td></tr><tr><td data-num=\"598\"></td><td><pre>&#125;</span></pre></td></tr></table></figure><blockquote>\n<p>ä¸‹è½½ <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRlZS5jb20vYmxpc3N5YW5nL0h0dHBEZW1v\">demo</span></p>\n</blockquote>\n<hr />\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l0ZnVubnlzaXRlL2FydGljbGUvZGV0YWlscy84MTAwMjEyMD91dG1fbWVkaXVtPWRpc3RyaWJ1dGUucGNfcmVsZXZhbnQubm9uZS10YXNrLWJsb2ctQmxvZ0NvbW1lbmRGcm9tTWFjaGluZUxlYXJuUGFpMi0xLm5vbmVjYXNlJmFtcDtkZXB0aF8xLXV0bV9zb3VyY2U9ZGlzdHJpYnV0ZS5wY19yZWxldmFudC5ub25lLXRhc2stYmxvZy1CbG9nQ29tbWVuZEZyb21NYWNoaW5lTGVhcm5QYWkyLTEubm9uZWNhc2U=\">åŸæ–‡</span></p>\n",
            "tags": [
                "Android"
            ]
        },
        {
            "id": "https://isviolet.github.io/p/7137d869.html",
            "url": "https://isviolet.github.io/p/7137d869.html",
            "title": "android studioä¿®æ”¹é…ç½®æ–‡ä»¶å¤¹(.android .gradle .AndroidStudio)ä½ç½®.md",
            "date_published": "2021-05-18T12:37:57.533Z",
            "content_html": "<blockquote>\n<p>Android studio å®‰è£…ä¹‹åä¸€èˆ¬é»˜è®¤åœ¨ c:/user/userid (*****)/;ï¼ˆæ¯”å¦‚:c:/user/xiaohong/ï¼‰å…¶ä»–è½¯ä»¶åœ¨å®‰è£…ä¸­è¦åˆ›å»ºç¼“å­˜æ–‡ä»¶å¤¹ï¼Œé‚£ä¹ˆä¹Ÿä¼šåœ¨è¿™ä¸ªç›®å½•åˆ›å»ºï¼Œæ¯”å¦‚ Notepad++ ç­‰ <img data-src=\"https://i.loli.net/2021/05/18/B5p2FzrwxL4v8eI.png\" alt=\"file\" /></p>\n</blockquote>\n<h4 id=\"è¿™ä¸‰ä¸ªæ–‡ä»¶å¤¹çš„ä½œç”¨\"><a class=\"anchor\" href=\"#è¿™ä¸‰ä¸ªæ–‡ä»¶å¤¹çš„ä½œç”¨\">#</a> è¿™ä¸‰ä¸ªæ–‡ä»¶å¤¹çš„ä½œç”¨ï¼š</h4>\n<ul>\n<li>.android è¿™ä¸ªæ–‡ä»¶å¤¹æ˜¯ Android SDK ç”Ÿæˆçš„ AVDï¼ˆAndroid Virtual Device Managerï¼‰å³æ¨¡æ‹Ÿå™¨å­˜æ”¾è·¯å¾„</li>\n<li>.AndroidStudio è¿™ä¸ªæ–‡ä»¶å¤¹æ˜¯ Android Studio çš„é…ç½®æ–‡ä»¶å¤¹ï¼Œä¸»è¦å­˜æ”¾ä¸€äº› AndroidStudio è®¾ç½®å’Œæ’ä»¶å’Œé¡¹ç›®çš„ç¼“å­˜ä¿¡æ¯</li>\n<li>.gradle è¿™ä¸ªæ–‡ä»¶å¤¹æ˜¯æ„å»ºå·¥å…· Gradle çš„é…ç½®æ–‡ä»¶å¤¹ï¼Œä¹Ÿä¼šå­˜å‚¨ä¸€äº›é¡¹ç›®çš„æ„å»ºç¼“å­˜ä¿¡æ¯</li>\n</ul>\n<h4 id=\"é»˜è®¤åˆ›å»ºè·¯å¾„åœ¨cç›˜æ¯”è¾ƒå ç©ºé—´ç°åœ¨æ¥è½¬ç§»è‡³dç›˜\"><a class=\"anchor\" href=\"#é»˜è®¤åˆ›å»ºè·¯å¾„åœ¨cç›˜æ¯”è¾ƒå ç©ºé—´ç°åœ¨æ¥è½¬ç§»è‡³dç›˜\">#</a> é»˜è®¤åˆ›å»ºè·¯å¾„åœ¨ C ç›˜ï¼Œæ¯”è¾ƒå ç©ºé—´ï¼Œç°åœ¨æ¥è½¬ç§»è‡³ D ç›˜</h4>\n<ol>\n<li>.android æ–‡ä»¶å¤¹çš„ä¿®æ”¹ è¿™ä¸ªæ–‡ä»¶å¤¹æ˜¯ç”± Android SDK é…ç½®æ¨¡æ‹Ÿå™¨ç”Ÿæˆçš„ï¼Œä¹Ÿæ˜¯æœ€å ç©ºé—´çš„ä¸€ä¸ªã€‚é¦–å…ˆï¼Œéœ€è¦æ·»åŠ ä¸€ä¸ªç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ ANDROID_SDK_HOMEï¼Œå¦‚ä¸‹å›¾ï¼š <img data-src=\"https://i.loli.net/2021/05/18/Md5E1qCopWLJk8U.png\" alt=\"file\" /> åˆ›å»ºæ¨¡æ‹Ÿå™¨åé»˜è®¤ä½ç½®è¿˜æ˜¯åœ¨ C ç›˜ï¼Œå¤åˆ¶åˆ° D ç›˜ï¼Œä¿®æ”¹å¦‚ä¸‹å›¾ï¼š <img data-src=\"https://i.loli.net/2021/05/18/VGPm1QqpNHWJ3OC.png\" alt=\"file\" /></li>\n<li>.AndroidStudio æ–‡ä»¶å¤¹çš„ä¿®æ”¹ è¿›å…¥ Android Studio çš„å®‰è£…ç›®å½•ï¼Œè¿›å…¥ bin æ–‡ä»¶å¤¹ï¼Œç”¨æ–‡æœ¬ç¼–è¾‘è½¯ä»¶æ‰“å¼€ idea.propertiesï¼Œå»æ‰ä»¥ä¸‹ä¸¤é¡¹çš„æ³¨é‡Šç¬¦å· #ï¼Œä¿®æ”¹å¯¹åº”çš„è·¯å¾„ä¸ºæ–°è·¯å¾„å³å¯ã€‚ <img data-src=\"https://i.loli.net/2021/05/18/F6Pb7UAxofhNlHK.png\" alt=\"file\" /></li>\n<li>.gradle æ–‡ä»¶å¤¹çš„ä¿®æ”¹ <img data-src=\"https://i.loli.net/2021/05/18/Pg6OCnkUSbXZEHB.png\" alt=\"file\" /></li>\n</ol>\n",
            "tags": [
                "Android"
            ]
        },
        {
            "id": "https://isviolet.github.io/p/1effa57a.html",
            "url": "https://isviolet.github.io/p/1effa57a.html",
            "title": "Gradleçš„ç¼“å­˜è·¯å¾„ä¿®æ”¹çš„å››ç§æ–¹æ³•",
            "date_published": "2021-05-18T12:36:30.357Z",
            "content_html": "<ol>\n<li>\n<p>æ–¹æ³•ä¸€ï¼Œä¿®æ”¹ gradle.properties æ–‡ä»¶ï¼Œå¢åŠ ä¸€å¥ gradle.user.home=D:\\Android.gradle <img data-src=\"https://i.loli.net/2021/05/18/5AWhiPnayZeFUcq.png\" alt=\"file\" /></p>\n<blockquote>\n<p>ä½†è¿™ç§æ–¹æ³•ï¼Œéœ€è¦æ¯ä¸ªé¡¹ç›®æ–‡ä»¶éƒ½è¦æ”¹ä¸€éï¼Œå¦‚æœåªæ˜¯ä¸´æ—¶ä¿®æ”¹ï¼Œå¯ä»¥é‡‡ç”¨è¿™ç§æ–¹æ³•ï¼Œå¦‚æœæ˜¯é’ˆå¯¹æ‰€æœ‰é¡¹ç›®çš„ï¼Œä¸å»ºè®®è¿™ç§æ–¹æ³•.</p>\n</blockquote>\n</li>\n<li>\n<p>æ–¹æ³•äºŒï¼Œåœ¨ Android Studio ä¸­ä¿®æ”¹ gradle ç”¨æˆ·ç›®å½•ï¼Œæ‰“å¼€è®¾ç½® (å¿«æ·é”® Ctrl+alt+S)ï¼Œå®šä½åˆ° Gradle èœå•ï¼Œä½œå¦‚ä¸‹è®¾ç½® <img data-src=\"https://i.loli.net/2021/05/18/muBl1LA8FTrXG7O.png\" alt=\"file\" /></p>\n<blockquote>\n<pre><code>    ä½†æ˜¯è¿™ä¸ªæ–¹æ³•ç°åœ¨å¥½åƒæ²¡ç”¨,ä¸è¿‡å¯ä»¥è¯•è¯•,ä¸‡ä¸€å°±å¯ä»¥äº†å‘¢(æ‰‹åŠ¨æ»‘ç¨½).\n</code></pre>\n</blockquote>\n</li>\n<li>\n<p>æ–¹æ³•ä¸‰ï¼Œä¿®æ”¹ gradle å¯åŠ¨è„šæœ¬ï¼Œè¿›å…¥ gradle å®‰è£…çš„ bin ç›®å½•ï¼Œä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ gradle.bat æ–‡ä»¶ï¼Œåœ¨å¦‚å›¾çš„ä½ç½®æ·»åŠ ä»¥ä¸‹è¯­å¥ <strong>set GRADLE_OPTS=&quot;-Dgradle.user.home=D:\\Android.gradle&quot;</strong> <img data-src=\"https://i.loli.net/2021/05/18/kDR5LKouTXfGJxF.png\" alt=\"file\" /></p>\n</li>\n<li>\n<p>æ–¹æ³•å››ï¼šä»¥ä¸Šå‡ ç§æ–¹æ³•ï¼Œéƒ½ä¸æ˜¯æœ€ç†æƒ³çš„æ–¹æ³•ï¼Œä¸‹é¢æ¨è Windows ç¯å¢ƒå˜é‡è®¾ç½® gradle ç”¨æˆ·ç›®å½•ï¼Œé€šè¿‡ç¯å¢ƒå˜é‡çš„æ–¹å¼ï¼Œgradle ä¼šè¯»å–ç¯å¢ƒå˜é‡ï¼Œæ‰€æœ‰çš„é¡¹ç›®éƒ½ä¼šè‡ªåŠ¨ä¿®æ”¹è¿‡æ¥ï¼Œéå¸¸æ–¹ä¾¿ã€‚æ‰“å¼€ç¯å¢ƒå˜é‡è®¾ç½®æ–¹æ³•å¦‚å›¾ (win10 ä¸‹ç”¨å¿«æ·é”® win+Q å‘¼å‡ºå°å¨œï¼Œå…¶ä»–ç‰ˆæœ¬å¯ä»¥è¿›æ§åˆ¶é¢æ¿æŸ¥æ‰¾åˆ°ç³»ç»Ÿ -&gt; é«˜çº§ç³»ç»Ÿè®¾ç½®) <img data-src=\"https://i.loli.net/2021/05/18/ITs9hDBfcg2ojHq.png\" alt=\"file\" /></p>\n</li>\n</ol>\n",
            "tags": [
                "Android"
            ]
        },
        {
            "id": "https://isviolet.github.io/p/4bb2eacc.html",
            "url": "https://isviolet.github.io/p/4bb2eacc.html",
            "title": "Androidä¸‹æ‹‰åˆ·æ–°SwipeRefreshLayoutç®€å•ç”¨æ³•",
            "date_published": "2021-05-18T12:33:58.115Z",
            "content_html": "<blockquote>\n<p>ä¹‹å‰ä¸€ç›´éƒ½æƒ³ç”¨ä¸‹æ‹‰åˆ·æ–°ï¼Œæ„Ÿè§‰ä¸Šæ˜¯åºå¤§çš„å·¥ç¨‹ï¼Œæ‰€ä»¥æç½®äº†ã€‚ç°åœ¨å­¦ä¹ äº†ä¸€ä¸‹å…¶å®çœŸçš„è¶…çº§ç®€å•ã€‚ çœ‹äº†ã€Šç¬¬ä¸€è¡Œä»£ç ã€‹ä»¥åŠ <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC8zYzQwMmE5ZTRiN2QlRTYlOTYlODclRTclQUIlQTA=\">https://www.jianshu.com/p/3c402a9e4b7d æ–‡ç« </span> çœ‹ä¸Šå»æ˜¯çœŸçš„ç®€å•ã€‚SwipeRefreshLayout ä¸‹åµŒå¥—ä¸€ä¸ªæ§ä»¶</p>\n</blockquote>\n<ol>\n<li>\n<p>å¸ƒå±€ä»£ç </p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>android.support.v4.widget.SwipeRefreshLayout</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@+id/mswipeRefreshLayout<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>layout_height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token entity named-entity\" title=\"&lt;\">&amp;lt;</span>WebView</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    android:id=<span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span>@+id/mwebview<span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    android:layout_width=<span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span>match_parent<span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    android:layout_height=<span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span>match_parent<span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token entity named-entity\" title=\"&gt;\">&amp;gt;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token entity named-entity\" title=\"&lt;\">&amp;lt;</span>/WebView<span class=\"token entity named-entity\" title=\"&gt;\">&amp;gt;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>android.support.v4.widget.SwipeRefreshLayout</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure></li>\n<li>\n<p>Activity ä»£ç </p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>mSwipe <span class=\"token operator\">=</span>  <span class=\"token function\">findViewById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>mswipeRefreshLayout<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setSwipe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\">/*</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    * è®¾ç½®ä¸‹æ‹‰åˆ·æ–°çƒé¢œè‰²</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    */</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    mSwipe<span class=\"token punctuation\">.</span><span class=\"token function\">setColorSchemeResources</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>color<span class=\"token punctuation\">.</span>swipeColor1<span class=\"token punctuation\">,</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>color<span class=\"token punctuation\">.</span>swipeColor2<span class=\"token punctuation\">,</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>color<span class=\"token punctuation\">.</span>swipeColor3<span class=\"token punctuation\">,</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>color<span class=\"token punctuation\">.</span>swipeColor4<span class=\"token punctuation\">,</span><span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>color<span class=\"token punctuation\">.</span>swipeColor5<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">/*</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    * è®¾ç½®ä¸‹æ‹‰åˆ·æ–°çš„ç›‘å¬</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    */</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    mSwipe<span class=\"token punctuation\">.</span><span class=\"token function\">setOnRefreshListener</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">SwipeRefreshLayout<span class=\"token punctuation\">.</span>OnRefreshListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onRefresh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token comment\">// åˆ·æ–°éœ€æ‰§è¡Œçš„æ“ä½œ</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>æˆ‘ä»¬å¯ä»¥åœ¨ res/values/colors.xml æ–‡ä»¶ä¸­è®¾ç½®æˆ‘ä»¬æƒ³è¦çš„é¢œè‰²</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>color</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>swipeColor1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>#3F51B5<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>color</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>color</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>swipeColor2<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>#000000<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>color</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>......</pre></td></tr></table></figure></li>\n<li>\n<p>åŠ è½½å®Œæ¯•åéœ€è¦å…³é—­ä¸‹æ‹‰åˆ·æ–°çƒ  <code>mSwipe.setRefreshing(false); </code></p>\n</li>\n<li>\n<p>æ‰“å¼€é¡µé¢è‡ªåŠ¨åˆ·æ–°  <code>mSwipe.measure(0,0); mSwipe.setRefreshing(true);</code></p>\n<blockquote>\n<p>åœ¨ onMeasure ä¹‹å‰ å•ç‹¬ä½¿ç”¨ setRefreshing (true) æ˜¯æ²¡æœ‰æ•ˆæœçš„</p>\n</blockquote>\n</li>\n<li>\n<p>è¿˜å¯ä»¥å¤å†™ onWindowFocusChanged å½“é¡µé¢è·å¾—ç„¦ç‚¹çš„æ—¶åˆ·æ–°</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onWindowFocusChanged</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">boolean</span> hasFocus<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onWindowFocusChanged</span><span class=\"token punctuation\">(</span>hasFocus<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    mSwipe<span class=\"token punctuation\">.</span><span class=\"token function\">setRefreshing</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>ä¹Ÿå¯ä»¥æ”¾åˆ° ui çº¿ç¨‹æ¶ˆæ¯å¾ªç¯ä¸­æ’é˜Ÿ</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>mSwipe<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Runnable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        mSwipe<span class=\"token punctuation\">.</span><span class=\"token function\">setRefreshing</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>code<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>pre<span class=\"token operator\">></span></pre></td></tr></table></figure></li>\n<li>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>åœ¨åˆ·æ–°ç»“æŸåå…³é—­åˆ·æ–°çƒ <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token class-name\">SwipeIsFinish</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>mSwipe<span class=\"token punctuation\">.</span><span class=\"token function\">isRefreshing</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> mSwipe<span class=\"token punctuation\">.</span><span class=\"token function\">setRefreshing</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n</ol>\n",
            "tags": [
                "Android"
            ]
        },
        {
            "id": "https://isviolet.github.io/p/65e770b4.html",
            "url": "https://isviolet.github.io/p/65e770b4.html",
            "title": "Androidå¼€å‘",
            "date_published": "2021-05-18T12:31:59.858Z",
            "content_html": "<p>&lt;p&gt;&lt;a href=&quot;<span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2FuZHJvaWQxNTcvYXJ0aWNsZS9kZXRhaWxzLzg4OTEyNjc2\">https://blog.csdn.net/android157/article/details/88912676</span>&quot;title=&quot;Android å¼€å‘ï¼šå¦‚ä½•å°†å·¥ç¨‹æ”¹é€ æˆåº“ï¼Œå¹¶ä¸Šä¼ åˆ° Github ä½œä¸ºä¾èµ–ï¼Œæä¾›å¼•ç”¨ &quot;&gt;Android å¼€å‘ï¼šå¦‚ä½•å°†å·¥ç¨‹æ”¹é€ æˆåº“ï¼Œå¹¶ä¸Šä¼ åˆ° Github ä½œä¸ºä¾èµ–ï¼Œæä¾›å¼•ç”¨ &lt;/a&gt;&lt;/p&gt;</p>\n<p>&lt;p&gt;&lt;a href=&quot;<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC9kNzYyM2QzMjY0ZDY=\">https://www.jianshu.com/p/d7623d3264d6</span>&quot;title=&quot;Android å®ä¹ ç”Ÿ â€”â€” ç½‘ç»œè¯·æ±‚åŠæ•°æ®è§£æ &quot;&gt;Android å®ä¹ ç”Ÿ â€”â€” ç½‘ç»œè¯·æ±‚åŠæ•°æ®è§£æ &lt;/a&gt;&lt;/p&gt;</p>\n",
            "tags": [
                "Android"
            ]
        }
    ]
}